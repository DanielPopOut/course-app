(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(327)},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(69),i=a.n(r),l=(a(129),a(1)),o=a(2),c=a(4),u=a(3),d=a(5),m=(a(130),a(131),a(132),a(331)),h=a(329),p=(a(133),a(134),a(330)),v=new p.a,f=v.asObservable();function b(e){return s.a.createElement("div",{className:"modal "+(e.visible?"":"display-none"),style:{zIndex:e.position||10},onClick:function(){return e.onClose()}},s.a.createElement("div",{className:"modal-box",onClick:function(e){return e.stopPropagation()}},e.children),s.a.createElement("div",null,e.onValidate?s.a.createElement("button",{onClick:function(){e.onValidate().then(e.onClose())}},"Validate"):""))}var g=b,y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={componentToShow:s.a.createElement("div",null,"Amigo"),modalVisibility:!1,modalComponentProps:{}},f.subscribe(function(e){if(!e)return a.hideModal(),void a.setState({modalComponentProps:""});a.setState({modalComponentProps:e,modalVisibility:!0})}),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"hideModal",value:function(){console.log("modal closed"),this.setState({modalVisibility:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement(b,Object.assign({},this.state.modalComponentProps,{visible:this.state.modalVisibility,onClose:function(){return e.hideModal()}}))}}]),t}(n.Component),E=a(6),C=a.n(E),k=a(8),O=a(14);a(137),a(138);var S={collection:"users",fields:[{name:"matricule",type:"text",placeholder:"Matricule",label:"Matricule"},{name:"name",type:"text",placeholder:"Name",label:"Nom"},{name:"surname",type:"text",placeholder:"SurName",label:"Prenom"},{name:"address",type:"text",placeholder:"Address",label:"Adresse"},{name:"contact",type:"number",placeholder:"Tel1/Tel2 ",label:"Telephone"},{name:"email",type:"email",placeholder:"Email",label:"Email"},{name:"pseudo",type:"text",placeholder:"UserName",label:"Pseudo"},{name:"password",type:"password",placeholder:"Password",label:"Mot de Passe"},{name:"passwordverification",type:"password",placeholder:"Password Verification",label:"V\xe9rifiez le Mot de Passe"}]},j={collection:"departments",fields:[{name:"label",type:"text",placeholder:"Label",label:"Label",required:!0},{name:"description",type:"textarea",placeholder:"Description",label:"Description"}]},w={collection:"specialities",fields:[{name:"label",type:"text",placeholder:"Appelation",label:"Appelation"},{name:"description",type:"textarea",placeholder:"Description",label:"Description"}]},N=["Year I","Year II","Year III","Year IV","Year V"],M=(a(139),"token"),T=a(122),x=a(120),V=a.n(x),q=new p.a,D=q.asObservable(),A=new p.a,_=A.asObservable(),Q=new p.a,P=Q.asObservable();function I(e){e,q.next(e)}function F(e){console.log("token set",e),localStorage.setItem("token",JSON.stringify(e))}function R(){return localStorage.getItem(M)}function L(){var e=R();return!(!R()||R().length<1)&&JSON.parse(window.atob(e.split(".")[1]))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";A.next(e)}var U=V.a.create({baseURL:"https://air-reader2.herokuapp.com/"});U.interceptors.request.use(function(e){var t=R();return t?"OPTIONS"!==e.method&&(e.headers.authorization=t):I(!1),e},function(e){return Promise.reject(e.response)}),U.interceptors.response.use(function(e){switch(e.data.message&&A.next(e.data.message),console.log("response status axios instance ",e.status),e.status){case 200:if(e.request.responseURL.indexOf("authentication/login")>0){var t=e.data.token;return t?(F(t),I(!0),console.log("token obtained ",t),e):e}return e;default:return console.log("unknwon error"),e}},function(e){return e.response&&e.response.data.errorMessage&&A.next(e.response.data.errorMessage),e.response});var z=U,W=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"sendDataToRetrieveToken",value:function(t){return e.postToServer("authentication/login",t)}},{key:"postToServer",value:function(e,t){return z.post(e,t)}},{key:"updateOnServer",value:function(e,t){return z.patch(e,t)}},{key:"replaceOnServer",value:function(e,t){return z.put(e,t)}},{key:"deleteOnServer",value:function(e,t){return z.delete(e+t)}},{key:"getFromServer",value:function(e){return z.get(e)}},{key:"getFromServer2132",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.projection,s=void 0===n?null:n,r=a.sort,i=void 0===r?null:r,l=a.limit,o=void 0===l?0:l,c=a.collection,u=void 0===c?"":c,d=Object(T.a)(a,["projection","sort","limit","collection"]);return console.log(d,t),d||s||i||o||u?e.postToServer(t+"filter",Object.assign({projection:s,sort:i,limit:o,collection:u},{filter:d})):z.get(t)}},{key:"retrieveAllDocumentsWithCollectionName",value:function(e){var t=this;z.post("crudOperations/get",{collection:e}).then(function(e){console.log(e),t.setState({dataToShow:e.data})})}},{key:"insertElementInDataBase",value:function(){var e=Object(k.a)(C.a.mark(function e(t,a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("crudOperations/insert",{collection:t,data:a});case 2:if(200!==(n=e.sent).status){e.next=8;break}return B("Insertion done With Success !!"),e.abrupt("return",Object.assign(a,{_id:n.data}));case 8:return B("Insertion Failed !!"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"replaceElementInDataBase",value:function(e,t){z.post("crudOperations/replace",{collection:e,data:t}).then(function(e){return console.log("replaceresult",e),200===e.status||!1})}},{key:"updateElementInDataBase",value:function(){var e=Object(k.a)(C.a.mark(function e(t,a,n){var s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("crudOperations/update",{collection:t,data:a,update:n});case 2:return s=e.sent,console.log("updateresult",s),e.abrupt("return",200===s.status||!1);case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"deleteElementInDataBase",value:function(e){z.post("crudOperations/delete",{collection:this.props.collection,data:e}).then(function(e){return console.log("delete result",e),200===e.status||!1})}}]),e}();function J(e){return e.label?s.a.createElement("label",{className:"form-helper-label"}," ",e.label," "):s.a.createElement("span",null)}var K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={checked:a.props.checked||!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.props.readOnly||(this.setState({checked:!this.state.checked}),this.props.onChange&&this.props.onChange(e))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("input",{id:this.props.checkbox_id||"",type:"checkbox",checked:this.state.checked,className:this.props.className||"form-helper-checkbox",onChange:function(t){return e.handleChange(t)},name:this.props.name}),s.a.createElement(J,{label:this.props.label}))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:a.props.value||""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"form-helper-div-input"},s.a.createElement(J,{label:this.props.label||this.props.name||""}),s.a.createElement("textarea",{required:"required",className:"form-helper-textarea",name:this.props.name||"",onChange:function(t){return e.handleChange(t)},value:this.state.value}))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={value:a.props.value||""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"form-helper-div-input"},s.a.createElement(J,{label:this.props.label}),s.a.createElement("input",{type:this.props.type,required:"required",className:this.props.className||"form-helper-input",name:this.props.name,onChange:function(t){return e.handleChange(t)},value:this.state.value,placeholder:this.props.placeholder||this.props.name,autoFocus:this.props.autoFocus}))}}]),t}(n.Component),$=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("select",{name:this.props.name,className:this.props.className||"form-helper-select",onChange:function(t){return e.props.onChange(t)}},s.a.createElement("option",{value:"-1",defaultValue:!0}," ",this.props.empty||" --- make a choice ---"," "),this.props.options.map(function(t,a){return s.a.createElement("option",{key:a,value:t[e.props.value]||a}," ",t[e.props.display]||t,"  ")})))}}]),t}(n.Component),Z=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("button",{type:this.props.type,className:this.props.className,onClick:this.props.onClick},this.props.value||this.props.name)}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dataToSend:{target:{name:a.props.name,value:[]}}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(this.state.dataToSend)}},{key:"componentDidMount",value:function(){this.props.onChange(this.state.dataToSend)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"list-from-model-container"},[].map(function(t,a){return s.a.createElement("div",{className:"list-from-model-checkbox-container"},s.a.createElement("input",{type:"checkbox",name:t.name,value:t._id,onChange:function(t){return e.handleChange(t)}}),s.a.createElement("div",null," ",JSON.stringify(t)," "))}))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={collectionName:a.props.data.collection||"",dataToSend:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=Object.assign({},this.state.dataToSend,Object(O.a)({},e.target.name,e.target.value));this.setState({dataToSend:t}),console.log(this.state.dataToSend)}},{key:"handleClick",value:function(e){var t=this.props.registration_path||"api/insert/"+this.state.collectionName;this.props.handleValidation?this.props.handleValidation(this.state.dataToSend):W.postToServer(t,this.state.dataToSend).then(function(e){200===e.status?alert("Enregistrement Effectu\xe9 avec succ\xe8s"):(console.log("error Message ",e.data.errorMessage),alert("Enregistrement non effectu\xe9"))})}},{key:"render",value:function(){var e=this,t=function(t){e.handleChange(t)},a=function(t){e.handleClick(t)},n=this.props.options||{};return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("section",{className:"form-helper-title"}," ",s.a.createElement("h3",null,this.props.title||"")),this.props.data.fields.map(function(e,a){switch(e.type){case"text":case"email":case"number":case"password":return s.a.createElement(H,Object.assign({key:a,options:n},e,{onChange:t}));case"button":return s.a.createElement(Z,Object.assign({key:a,options:n},e,{onChange:t}));case"select":return s.a.createElement($,Object.assign({key:a,options:n},e,{onChange:t}));case"listfrommodel":return s.a.createElement(G,Object.assign({key:a,options:n},e,{onChange:t}));case"textarea":return s.a.createElement(Y,Object.assign({key:a,options:n},e,{onChange:t}));default:return""}}),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,{type:"reset",className:" form-helper-button danger",value:"Reset"}),this.props.modificationForm?s.a.createElement(Z,Object.assign({type:"button",className:"form-helper-button success",value:"Modifier"},{onClick:a})):s.a.createElement(Z,Object.assign({type:"button",className:"form-helper-button success",value:"Valider"},{onClick:a})))))}}]),t}(n.Component),ee=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"renderfield",value:function(e){var t=this,a=function(e){t.props.onChange(e)},n=this.props.options||{};switch(e.type){case"text":case"email":case"number":case"password":return s.a.createElement(H,Object.assign({options:n},e,{onChange:a}));case"button":return s.a.createElement(Z,Object.assign({options:n},e,{onChange:a}));case"select":return s.a.createElement($,Object.assign({options:n},e,{onChange:a}));case"listfrommodel":return s.a.createElement(G,Object.assign({options:n},e,{onChange:a}));case"textarea":return s.a.createElement(Y,Object.assign({options:n},e,{onChange:a}))}}},{key:"render",value:function(){return this.renderfield(this.props)}}]),t}(n.Component),te=X,ae=a(26),ne=(a(158),a(159),function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));var n=e.dataModel.reduce(function(e,t){return e[t.name]="",e},{});return a.state={dataToSend:e.data?Object.assign({},e.data):Object.assign({},n),dataToSendModel:n},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"onEnterClick",value:function(e){"Enter"===e.key&&this.onValidate()}},{key:"modifyData",value:function(e){var t=Object.assign({},this.state.dataToSend,Object(O.a)({},e.target.name,e.target.value));this.setState({dataToSend:t}),console.log(t)}},{key:"createForm",value:function(){var e=this;return this.props.dataModel.map(function(t){var a={type:t.type,label:t.label||t.name,name:t.name,placeholder:t.placeholder,value:e.state.dataToSend[t.name]||""};return s.a.createElement("div",{className:"label-input-div",key:t.name},s.a.createElement(ee,Object.assign({},a,{onChange:function(t){return e.modifyData(t)}})))})}},{key:"onValidate",value:function(){this.props.onValidate?this.props.onValidate(this.state.dataToSend):alert(JSON.stringify(this.state.dataToSend))}},{key:"onReset",value:function(){this.setState({dataToSend:Object.assign({},this.state.dataToSendModel)}),console.log(this.state.dataToSend)}},{key:"buttons",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"hr-button-block"},this.props.onValidate?s.a.createElement(Z,Object.assign({onClick:function(){return e.props.onValidate(e.state.dataToSend)}},{type:"button",value:"Valider",className:"form-helper-button success"})):"",this.props.onDelete?s.a.createElement(Z,Object.assign({onClick:function(){return e.props.onDelete(e.state.dataToSend)}},{type:"button",value:"Supprimer",className:"form-helper-button danger"})):"",this.props.onModify?s.a.createElement(Z,Object.assign({onClick:function(){return e.props.onModify(e.state.dataToSend)}},{type:"button",value:"Modifier",className:"form-helper-button success"})):""))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{onKeyPress:function(t){return e.onEnterClick(t)}},s.a.createElement("h2",null,this.props.title),this.createForm(),s.a.createElement("div",{className:"flex-container"},this.buttons(),this.props.children))}}]),t}(n.Component)),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dataToShow:e.dataToShow,modalVisibility:!1,modalComponentChild:s.a.createElement("h1",null,"Amigo banana")},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getAllFields",value:function(e){var t=e.reduce(function(e,t){for(var a=Object.keys(t),n=0;n<a.length;n++){e[a[n]]=""}return e},{});return Object.keys(t)}},{key:"onElementClick",value:function(e){var t=this;if(console.log("selected ",e),this.props.onElementClick)this.props.onElementClick();else{var a=s.a.createElement(ne,{dataModel:this.props.dataModel,data:e,onModify:function(){var e=Object(k.a)(C.a.mark(function e(a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.updateElement(a);case 2:n=e.sent,console.log("awaited answer",n),t.setModalVisibility(!n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onDelete:function(){var e=Object(k.a)(C.a.mark(function e(a){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.deleteElement(a);case 2:n=e.sent,console.log("awaited answer",n),t.setModalVisibility(!1);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()});this.setState({modalComponentChild:a}),this.setModalVisibility(!0)}}},{key:"setModalVisibility",value:function(e){this.setState({modalVisibility:e}),e||this.setState({modalComponentChild:""})}},{key:"createShowDataTable",value:function(){var e=this,t=this.props.fields?this.props.fields:this.getAllFields(this.props.dataToShow),a=this.props.dataToShow.map(function(a,n){var r=t.map(function(e,t){return s.a.createElement("div",{className:"data-array-table-body-cell",key:t},a[e])});return s.a.createElement("div",{key:n,className:"data-array-table-body-row",onClick:function(){return e.onElementClick(a)}},r)}),n=t.map(function(e,t){return s.a.createElement("div",{className:"data-array-table-header-cell",key:t},e)});return s.a.createElement("div",{className:"div-table-container"},s.a.createElement("div",{className:"data-array-table"},s.a.createElement("div",{className:"data-array-table-header"},s.a.createElement("div",{className:"data-array-table-header-row"},n)),s.a.createElement("div",{className:"data-array-table-body"},a)),s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.setModalVisibility(!1)}},this.state.modalComponentChild))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,this.props.title," List"),this.createShowDataTable())}}]),t}(n.Component),re=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e));var n=S.fields;return e.dataToShow||a.retrieveDataOnServer(),a.state={dataModel:S,dataToSend:Object.assign({},n),dataToSendModel:n,modalVisibility:!1,dataToShow:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"retrieveDataOnServer",value:function(){var e=this;this.props.collection&&W.postToServer("crudOperations/get",{collection:this.props.collection}).then(function(t){console.log(t),e.setState({dataToShow:t.data})})}},{key:"insertElementInDataBase",value:function(e){var t=this;W.postToServer("crudOperations/insert",{collection:this.props.collection,data:e}).then(function(a){200===a.status&&t.addElementToList(Object.assign(e,{_id:a.data}))})}},{key:"replaceElementInDataBase",value:function(e){var t=this;return W.postToServer("crudOperations/replace",{collection:this.props.collection,data:e}).then(function(a){return console.log("updateresult",a),200===a.status&&t.updateElement(e)})}},{key:"deleteElementInDataBase",value:function(e){var t=this;return console.log("you are trying to delete this."+{collection:this.props.collection,data:e}),W.postToServer("crudOperations/delete",{collection:this.props.collection,data:e}).then(function(a){return console.log("delete result",a),200===a.status&&t.deleteElement(e)})}},{key:"addElementToList",value:function(e){var t=Object(ae.a)(this.state.dataToShow).concat([e]);this.setState({dataToShow:t,modalVisibility:!1}),console.log(t)}},{key:"updateElement",value:function(e){console.log("new element",e);var t=this.state.dataToShow.findIndex(function(t){return t._id===e._id});if(t>-1){var a=Object(ae.a)(this.state.dataToShow);return a[t]=e,this.setState({dataToShow:a}),console.log(a),t>-1}return!1}},{key:"deleteElement",value:function(e){console.log("new element",e);var t=this.state.dataToShow.findIndex(function(t){return t._id===e._id});if(t>-1){var a=Object(ae.a)(this.state.dataToShow);return a.splice(t,1),this.setState({dataToShow:a}),console.log(a),t>-1}return!1}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{marginBottom:"100px"}},s.a.createElement("div",{className:"flex-container flex-center"},s.a.createElement("span",{style:{fontSize:"30px",fontWeight:"800"}},this.props.collection," "),s.a.createElement(Z,Object.assign({value:"NEW",className:"form-helper-button warning"},{onClick:function(){return e.setState({modalVisibility:!0})}}))),s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.setState({modalVisibility:!1})}},s.a.createElement(ne,{dataModel:this.props.fields,onValidate:function(t){return e.insertElementInDataBase(t)}})),s.a.createElement(se,{title:this.props.collection,dataModel:this.props.fields,fields:this.props.fields?this.props.fields.map(function(e){return e.name}):null,dataToShow:this.state.dataToShow,updateElement:function(t){return e.replaceElementInDataBase(t)},deleteElement:function(t){return e.deleteElementInDataBase(t)}}))}}]),t}(n.Component),ie=function(e){return/^(([^<>()[\]\\.,;:s@"]+(\.[^<>()[\]\\.,;:s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},le=function(e){console.log("password sended ",e);return!!e.match(/^[A-Za-z]w{6,14}$/)},oe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleValidation",value:function(e){ie(e.email)?le(e.password)?e.password===e.passwordverification?(delete e.passwordverification,W.postToServer("authentication/newuser",e).then(function(e){200===e.status?alert("Enregistrement Effectu\xe9 avec succ\xe8s"):(console.log("error Message ",e.data.errorMessage),alert("Enregistrement non effectu\xe9"))})):alert("Veuillez saisir des mots de passe identiques !!"):alert("Votre mot de passe n'est pas valide !!"):alert("Veuillez saisir une adresse mail valide SVP !! ")}},{key:"render",value:function(){var e=this;return s.a.createElement(te,{data:S,registration_path:"authentication/newuser",title:"Nouvel Utilisateur",options:{label:""},handleValidation:function(t){return e.handleValidation(t)}})}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={valueToSearch:"",dataToSend:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleValidateSearch",value:function(e){var t=this,a={valueToSearch:this.state.valueToSearch};this.props.handleFilter([]),W.getFromServer("findusers/",a).then(function(e){console.log(e.data),t.props.handleFilter(e.data.users)})}},{key:"handleChange",value:function(e){this.setState({valueToSearch:e.target.value})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"users-interface-header"},s.a.createElement("h3",null,"Welcome to Users Management Interface !!"," ")),s.a.createElement("div",{className:"user-search-new-div"},s.a.createElement("div",{className:"div-search-block"},s.a.createElement(H,Object.assign({},{type:"text",name:"input-user-search",className:"search-input form-helper-input ",placeholder:"Search"},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement("div",{className:"div-img-search"},s.a.createElement("img",{src:"/images/search.png",alt:"Search",onClick:function(t){return e.handleValidateSearch(t)},className:"button-image-user-search"})))))}}]),t}(n.Component),ue=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null)}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={ListToShow:[],modalVisibility:!1,modalChildren:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getListToShow",value:function(){var e=this;W.postToServer("/crudOperations/get",{collection:"users"}).then(function(t){200===t.status?e.setState({ListToShow:t.data}):alert(t.data.errorMessage)})}},{key:"componentDidMount",value:function(){this.getListToShow()}},{key:"handleModalClose",value:function(){this.setState({modalChildren:""}),this.setState({modalVisibility:!1})}},{key:"handleModal",value:function(e,t){this.setState({modalVisibility:e,modalChildren:t})}},{key:"handleFilter",value:function(e){this.setState({ListToShow:e})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleModalClose()},children:this.state.modalChildren})),s.a.createElement("div",{className:"users-interface-block"},s.a.createElement("div",{className:"users-interface-header"},s.a.createElement(ce,{handleFilter:function(t){return e.handleFilter(t)},handleModal:function(t,a){return e.handleModal(t,a)}})),s.a.createElement("div",{className:"users-interface-content"},s.a.createElement(re,S)),s.a.createElement("div",{className:"users-interface-footer"},s.a.createElement(ue,null))))}}]),t}(n.Component),me=(a(160),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"message-box message-box-"+this.props.type||!1},s.a.createElement("div",{className:"message-message"},this.props.message||""))}}]),t}(n.Component)),he=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={contactoremail:"email",inputEmailparams:{name:"email",type:"email",label:"Email",placeholder:"Email"},inputcontactparams:{name:"contact",type:"Number",label:"Telephone",placeholder:"Telephone"},contact:"",email:"",dataToSend:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){switch(e.target.name){case"email":this.setState({contactoremail:"email",email:e.target.value,dataToSend:{contactoremail:"email",email:e.target.value}});break;case"contact":this.setState({contactoremail:"contact",contact:e.target.value,dataToSend:{contactoremail:"contact",conctact:e.target.value}})}}},{key:"contactoremail",value:function(){var e=this;switch(this.state.contactoremail){case"email":return s.a.createElement(H,Object.assign({},this.state.inputEmailparams,{onChange:function(t){return e.handleChange(t)}}));case"contact":return s.a.createElement(H,Object.assign({},this.state.inputcontactparams,{onChange:function(t){return e.handleChange(t)}}))}}},{key:"handleClick",value:function(){var e=this,t=0;switch(this.state.contactoremail){case"email":ie(this.state.email)?this.setState({dataToSend:{contactoremail:this.state.contactoremail,email:this.state.email}}):(t=1,alert("Veuillez Saisir Une Adresse Mail Valide"));break;case"contact":this.state.contact.match(/^d{9}$/)?(this.setState({dataToSend:{contactoremail:this.state.contactoremail,contact:this.state.contact}}),console.log(this.state.dataToSend)):(t=1,alert("Veuillez Saisir Un Numero Valide"))}t||(console.log("donnes envoyees",this.state.dataToSend),W.postToServer("authentication/passwordRecovery/",this.state.dataToSend).then(function(t){console.log(t.data),200===t.status?(e.props.nextStep(e.state.dataToSend),console.log(t.data.message)):console.log(t.data.errorMessage)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"pass-recov-setp-one-block"},s.a.createElement("div",{className:"pass-recov-step-one-header "+this.state.contactoremail},s.a.createElement("div",{onClick:function(t){return e.setState({contactoremail:"email"})}}," EMail "),s.a.createElement("div",{onClick:function(t){return e.setState({contactoremail:"contact"})}},"  Telephone ")),s.a.createElement("div",{className:"pass-recov-step-one-content"},this.contactoremail()),s.a.createElement("div",{className:"pass-recov-step-one-footer"},s.a.createElement("button",{className:"pass-recov-button",onClick:function(){return e.handleClick()}}," Suivant")))}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={DataToSend:{code:""}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=Object.assign({},this.state.dataToSend,this.props.data[1],{code:e.target.value});this.setState({dataToSend:t}),console.log(this.state.dataToSend)}},{key:"handleClick",value:function(e){var t=this;this.state.dataToSend.code.length>=4?W.postToServer("authentication/passwordRecoveryCode/",this.state.dataToSend).then(function(e){200===e.status?t.props.nextStep(t.state.dataToSend):alert(e.data.errorMessage)}):alert("Veuillez v\xe9rifier le code entr\xe9 SVP.")}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"pass-recov-step-one-content"},s.a.createElement(H,Object.assign({},{name:"recoverycode",type:"text",label:"Code",placeholder:"CODE"},{onChange:function(t){return e.handleChange(t)}}))),s.a.createElement("div",{className:""},s.a.createElement(Z,Object.assign({},{type:"button",name:"codevalidatebutton",className:"form-helper-button success",value:"Valider"},{onClick:function(t){return e.handleClick(t)}})," Valider")))}}]),t}(n.Component),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={dataToSend:{newpassword:"",newpasswordtwo:""}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=Object.assign({},this.state.dataToSend,Object(O.a)({},e.target.name,e.target.value));this.setState({dataToSend:t}),console.log(this.state.dataToSend)}},{key:"handleClick",value:function(e){var t=this;if(this.state.dataToSend.newpassword.length>=4&&this.state.dataToSend.newpassword===this.state.dataToSend.newpasswordtwo){var a=Object.assign({},this.state.dataToSend,this.props.data[2]);W.postToServer("authentication/passwordReset/",a).then(function(e){console.log(e.data),200===e.status?t.props.nextStep({status:1}):alert(e.data.message)})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"pass-recov-newpass-block"},s.a.createElement("div",{className:""},s.a.createElement(H,Object.assign({},{name:"newpassword",type:"password",label:"Nouveau Mot De Passe",placeholder:"Nouveau Mot De passe "},{required:"required",onChange:function(t){return e.handleChange(t)}})),s.a.createElement(H,Object.assign({},{name:"newpasswordtwo",type:"password",label:"Entrez de nouveau votre mot de passe",placeholder:" Nouveau Mot de Passe"},{required:"required",onChange:function(t){return e.handleChange(t)}}))),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({},{type:"button",name:"previous",value:"Precedent",className:"form-helper-button warning"},{onClick:function(t){return e.props.previousStep(t)}})),s.a.createElement(Z,Object.assign({},{type:"button",name:"next",value:"Valider",className:"form-helper-button success"},{onClick:function(t){return e.handleClick(t)}}))))}}]),t}(n.Component),fe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(me,{type:"success",message:"Nouveau Mot de passe Enregistr\xe9"}))}}]),t}(n.Component),be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).messages=["","Retrouvez Votre Mot De Passe par Mail ou Telephone","Un code vous a \xe9t\xe9 Envoy\xe9. Veuillez saisir le Code Re\xe7u.","Entrez vos nouveaux parametres"],a.state={currentStep:1,currentMessage:a.messages[1],inProcess:0,email:"",code:"",currentData:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"processWorking",value:function(){if(1===this.state.inProcess)return s.a.createElement("div",null," ",s.a.createElement("img",{src:"/images/al.gif",alt:"Processing ..."})," ")}},{key:"handleChange",value:function(e){console.log("name : "+e.target.name),console.log("value : "+e.target.value)}},{key:"nextStep",value:function(e){this.setState({currentData:Object(O.a)({},this.state.currentStep,e),currentMessage:this.messages[this.state.currentStep+1]}),this.setState({currentStep:this.state.currentStep+1}),console.log(this.state)}},{key:"previousStep",value:function(){this.setState({currentStep:this.state.currentStep-1})}},{key:"displayCurrentStep",value:function(){var e=this;switch(this.state.currentStep){case 1:return s.a.createElement(he,{nextStep:function(t){return e.nextStep(t)}});case 2:return s.a.createElement(pe,{onChange:function(t){return e.handleChange(t)},data:this.state.currentData,nextStep:function(t){return e.nextStep(t)},previousStep:function(t){return e.previousStep(t)}});case 3:return s.a.createElement(ve,{onChange:function(t){return e.handleChange(t)},data:this.state.currentData,nextStep:function(t){return e.nextStep(t)},previousStep:function(t){return e.previousStep(t)}});case 4:return s.a.createElement(fe,{onChange:function(t){return e.handleChange(t)},nextStep:function(t){return e.nextStep(t)}})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"block-password-recovery"},s.a.createElement("div",{className:"section-header"},"Mot de Passe Oubli\xe9 ?",s.a.createElement("div",{className:"bottom-border"},"  ")),s.a.createElement(me,{type:"note",message:this.state.currentMessage}),s.a.createElement("div",null,this.processWorking()),this.displayCurrentStep(),s.a.createElement("div",{className:"password-recovery-footer"}))}}]),t}(n.Component),ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalVisibility:!1,modalChildren:"",dataToSend:{pseudo:"",password:""},cursor:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"newAccount",value:function(){this.setState({modalVisibility:!0,modalChildren:s.a.createElement(oe,null)})}},{key:"newPassword",value:function(){this.setState({modalVisibility:!0,modalChildren:s.a.createElement(be,null)})}},{key:"handleCloseModal",value:function(e){this.setState({modalVisibility:!1,modalChildren:""})}},{key:"handleChange",value:function(e){var t=Object.assign({},this.state.dataToSend,Object(O.a)({},e.target.name,e.target.value));this.setState({dataToSend:t})}},{key:"handleLoginValidate",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.dataToSend.pseudo||""===this.state.dataToSend.password){e.next=4;break}return this.setState({cursor:"cursor-progress"}),e.next=4,W.postToServer("authentication/login",this.state.dataToSend).then(function(e){200===e.status&&(console.log(" The login props ",t.props),t.setState({cursor:""}),t.props.closeModal()),t.setState({cursor:""})}).catch(function(e){console.log("connexion request failed ",e)});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.handleLoginValidate().then()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"form-connexion-block "+this.state.cursor},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(t){return e.handleCloseModal(t)}},this.state.modalChildren),s.a.createElement("form",{className:"form-connexion",onKeyPress:function(t){return e.handleKeyPress(t)}},s.a.createElement("div",{className:"form-connexion-header"},s.a.createElement("div",null,"Connexion ")),s.a.createElement("div",{className:"form-connexion-content"},s.a.createElement("div",null,s.a.createElement("label",null," Pseudo "),s.a.createElement("input",{onChange:function(t){return e.handleChange(t)},autoFocus:!0,type:"text",autoComplete:"off",name:"pseudo",placeholder:"Pseudo"})),s.a.createElement("div",null,s.a.createElement("label",null," Mot de Passe "),s.a.createElement("input",{onChange:function(t){return e.handleChange(t)},type:"password",autoComplete:"off",name:"password",placeholder:"Mot de Passe"})),s.a.createElement("div",null,s.a.createElement("div",null," ",s.a.createElement("button",{type:"button",onClick:function(t){e.handleLoginValidate(t).then()},className:"login-button-validate"}," Se Connecter ")))),s.a.createElement("div",{className:"form-connexion-footer"},s.a.createElement("div",null," ",s.a.createElement("button",{type:"button",className:"new-account-button",onClick:function(){return e.newAccount()}}," Cr\xe9er Un Nouveau Compte ")),s.a.createElement("div",{className:"password-forgotten-div",onClick:function(){return e.newPassword()}}," Des Probl\xe8mes pour vous Connecter ?"))))}}]),t}(n.Component),ye=a(21),Ee=Object(ye.a)(),Ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalVisibility:!1,modalChildren:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"userInfosToDisplay",value:function(e){return s.a.createElement("div",{className:"user-connected-infos-div"},s.a.createElement("div",{className:"name"},e.name+" "+e.surname),s.a.createElement("div",{className:"email"},e.email," "))}},{key:"openLoginModal",value:function(){var e=this;this.setState({modalVisibility:!0,modalChildren:s.a.createElement(ge,{closeModal:function(){return e.closeModal()}})})}},{key:"openProfile",value:function(){console.log("current props",this.props),Ee.push("/profile")}},{key:"logOut",value:function(){localStorage.removeItem("token"),I(!1),Ee.push("/welcome")}},{key:"display",value:function(){var e=this;if(this.props.loggedIn){var t=L();return s.a.createElement("div",{key:"Deconnexion",className:"navbar-item-div connexion-tooltip"},s.a.createElement("div",{className:"navbar-item-link loggin-button"},t.surname?t.surname:""),s.a.createElement("div",{className:"tooltip-content"},this.userInfosToDisplay(t),s.a.createElement("div",{className:"form-helper-button logout-button",onClick:function(t){t.stopPropagation(),e.logOut()}},"Deconnexion"),s.a.createElement("div",{className:"user-profile-link",onClick:function(){return e.openProfile()}},"Acceder au Profile")))}return s.a.createElement("div",{key:"Connexion",className:"navbar-item-div "},s.a.createElement("div",{className:"navbar-item-link loggin-button",onClick:function(){return e.openLoginModal()}},"Connexion"))}},{key:"closeModal",value:function(){this.setState({modalVisibility:!1,modalChildren:""})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),this.display())}}]),t}(n.Component),ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).tableauNavbar=[{title:"Contacts",redirectionAddress:"/contacts"}],a.loggedInTableauNavbar=[{title:"Cours",redirectionAddress:"/courses",subItems:[{title:"Administration",redirectionAddress:"/courses/administration"}]},{title:"TESTS",redirectionAddress:"/mcqs"},{title:"Contacts",redirectionAddress:"/contacts",subItems:[{title:"Administration",redirectionAddress:"/contacts/administration"}]},{title:"Users",redirectionAddress:"/users"}],a.state={},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleRedirect",value:function(e){return s.a.createElement(m.a,{to:e})}},{key:"checkActive",value:function(e){return(Ee.location.pathname||" ").search(e)?"non-active-menu":"active-menu"}},{key:"render",value:function(){var e=this,t=this.props.loggedIn?this.loggedInTableauNavbar:this.tableauNavbar;return s.a.createElement("div",{className:" navbar-component lg-only full-width"},s.a.createElement("div",{className:"nav-brand"},s.a.createElement("div",{key:"AlphaM",className:"navbar-item-div "},s.a.createElement(h.a,{to:"/welcome",className:"navbar-item-link login-button "+this.checkActive("/welcome")},"Home"))),s.a.createElement("div",{className:"navbar-items-block"},t.map(function(t){return s.a.createElement("div",{key:t.title,className:"navbar-item-div"},s.a.createElement(h.a,{to:t.redirectionAddress,className:"navbar-item-link "+e.checkActive(t.redirectionAddress)},t.title+(t.content?JSON.stringify(e.props[t.content]):"")),t.subItems?s.a.createElement("div",{className:"sub-menus-div"},t.subItems.map(function(a){return s.a.createElement("div",{key:a.title,className:"navbar-item-div"},s.a.createElement(h.a,{to:a.redirectionAddress,className:"navbar-item-link "},a.title+(a.content?JSON.stringify(e.props[t.content]):"")))})):"")})),s.a.createElement("div",{className:"navbar-right-side"},s.a.createElement(Ce,{loggedIn:this.props.loggedIn,handleRedirect:function(t){return e.handleRedirect(t)}})))}}]),t}(n.Component),Oe=a(332),Se=(a(164),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"welcome"},s.a.createElement("div",{className:"welc_text"}," ","Online Courses"),s.a.createElement("div",{className:"welc_slogan"},"Apprenez en Toute Simplicit\xe9 !!")))}}]),t}(n.Component)),je=(a(165),a(166),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={registered:a.registrationState()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"registrationState",value:function(){var e=L();if(e.hasOwnProperty("student"))return-1!==e.student.indexOf(this.props.course._id)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.state.registered?s.a.createElement(Z,Object.assign({name:"courseregistrationbutton",value:"Se Desinscrire",className:"form-helper-button danger"},{onClick:function(){return e.setState({registered:!e.props.cancelregistration()})}})):s.a.createElement(Z,Object.assign({name:"courseregistrationbutton",value:"S'inscrire",className:"form-helper-button success"},{onClick:function(){return e.setState({registered:e.props.newregistration()})}})))}}]),t}(n.Component)),we=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={searchedElement:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({searchedElement:e.target.value}),console.log("search params ",this.state),""===e.target.value&&this.props.handleValidateSearch(this.state.searchedElement)}},{key:"handleKeyPressOnSearch",value:function(e){"Enter"===e.key&&this.props.handleValidateSearch(this.state.searchedElement),console.log("after state ",this.state)}},{key:"render",value:function(){var e=this,t={name:"newuserbutton",value:"Ajouter un cours",className:"form-helper-button success",onClick:function(){e.props.handleRedirection("/createcourse")}};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"courses-search-new-div"},s.a.createElement("div",{className:"div-search-block  ",onKeyPress:function(t){e.handleKeyPressOnSearch(t)}},s.a.createElement(H,Object.assign({},{type:"text",name:"input-course-search",className:"search-input form-helper-input ",placeholder:"Course Title",autoFocus:!0},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement("div",{className:"div-img-search"},s.a.createElement("img",{src:"/images/search.png",alt:"Search",onClick:function(){return e.props.handleValidateSearch(e.state.searchedElement)},className:"button-image-user-search"}))),s.a.createElement("div",{className:"new-user-button"},s.a.createElement(Z,t))))}}]),t}(n.Component),Ne=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"newregistration",value:function(e){return W.postToServer("courses/newRegistration",{token:R(),course:e}).then(function(e){return 200===e.status&&(console.log("Response",e),F(e.data),!0)})}},{key:"cancelregistration",value:function(e){return W.postToServer("courses/cancelRegistration",{token:R(),course:e}).then(function(e){return 200===e.status&&(console.log("Response",e),F(e.data),!0)})}},{key:"handleClick",value:function(e){this.props.openCourse(e)}},{key:"showInscriptionOptions",value:function(e){var t=this;if(this.props.loggedIn)return s.a.createElement("div",{className:"tooltip-content",onClick:function(e){return e.stopPropagation()}},s.a.createElement(je,{course:e,newregistration:Object(k.a)(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.newregistration(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),cancelregistration:Object(k.a)(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.cancelregistration(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),register:function(){return t.register(e)}}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"courses-list-div"},this.props.courses.map(function(t,a){return s.a.createElement("div",{key:a,onClick:function(a){return e.handleClick(t)},className:"course-item col-3 tooltip"},s.a.createElement("div",null,s.a.createElement("img",{src:"images/prem_couv.jpg",className:"course-cover-image",alt:"Premiere de couverture"}),s.a.createElement("div",{className:"course-description"},t.description)),s.a.createElement("div",{className:"course-title"},t.title),e.showInscriptionOptions(t))})))}}]),t}(n.Component),Me=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"newregistration",value:function(e){return W.postToServer("courses/newRegistration",{token:R(),course:e}).then(function(e){return 200===e.status&&(console.log("Response",e),F(e.data),!0)})}},{key:"cancelregistration",value:function(e){return W.postToServer("courses/cancelRegistration",{token:R(),course:e}).then(function(e){return 200===e.status&&(console.log("Response",e),F(e.data),!0)})}},{key:"handleClick",value:function(e){this.props.openCourse(e)}},{key:"showInscriptionOptions",value:function(e){var t=this;if(this.props.loggedIn)return s.a.createElement("div",{className:"tooltip-content",onClick:function(e){return e.stopPropagation()}},s.a.createElement(je,{course:e,newregistration:Object(k.a)(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.newregistration(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),cancelregistration:Object(k.a)(C.a.mark(function a(){return C.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.cancelregistration(e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),register:function(){return t.register(e)}}))}},{key:"displayCourses",value:function(){var e=this;return this.props.courses.map(function(t,a){return s.a.createElement("div",{key:a,className:"department-level-div"},s.a.createElement("h5",{className:"department-title"}," ",t.department.label),s.a.createElement("div",{className:"department-courses-div"},t.specialities.map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("h5",{className:"speciality-title"}," ",t.speciality.label),s.a.createElement("div",{className:"speciality-content-div"},t.courses.map(function(t,a){return s.a.createElement("div",{key:a,onClick:function(a){return e.handleClick(t)},className:"course-title"},t.title)})))})))})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"courses-list-div"},this.displayCourses()))}}]),t}(n.Component),Te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={courses:[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.getFromServer("courses/getCoursesByDepartment").then(function(t){200===t.status&&(console.log("courses list response ",t.data),e.setState({courses:t.data}))})}},{key:"handleRedirection",value:function(e){this.props.history.push(e)}},{key:"handleOpenCourse",value:function(e){console.log(this.props),this.props.history.push("/course/"+e._id)}},{key:"handleValidateSearch",value:function(e){var t=this;console.log("data sended ",e),e?W.postToServer("/courses/findCoursesFromTitle",{title:e}).then(function(e){200===e.status?(console.log("find results ",e.data),t.setState({courses:e.data})):console.log("find error ",e.data.errorMessage)}):this.componentDidMount()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(we,{handleRedirection:function(t){return e.handleRedirection(t)},handleValidateSearch:function(t){return e.handleValidateSearch(t)}}),s.a.createElement(Me,{courses:this.state.courses,openCourse:function(t){return e.handleOpenCourse(t)},loggedIn:this.props.loggedIn}))}}]),t}(n.Component),xe=(a(167),a(168),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"teacher-to-add-div"},s.a.createElement("div",null,s.a.createElement("div",null," ",this.props.user.email," "),s.a.createElement("div",null,this.props.user.name+" "+this.props.user.surname)),s.a.createElement("div",null,this.props.current?s.a.createElement(Z,Object.assign({value:"-",className:"form-helper-button danger"},{onClick:function(){return e.props.handleValidation()}})):s.a.createElement(Z,Object.assign({value:"+",className:"form-helper-button success"},{onClick:function(){return e.props.handleValidation()}}))))}}]),t}(n.Component)),Ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={currentTeachers:[],emails:[],selectedAccounts:[],dataToSend:{user:{},course:a.props.course}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleValidateSearch",value:function(e){var t=this;0===this.state.emails.length?B("Veuillez Saisir un email valide SVP !!"):W.postToServer("courses/getUsers/",{emails:this.state.emails}).then(function(e){if(200===e.status){console.log("acc list",e.data);var a=t.state.currentTeachers,n=t.state.selectedAccounts;e.data.forEach(function(e){console.log("a user ",e),e.hasOwnProperty("teacher")&&e.teacher.indexOf(t.props.course._id)>=0?a.push(e):n.push(e)}),t.setState({currentTeachers:a,selectedAccounts:n}),console.log("new state",t.state)}})}},{key:"handleChange",value:function(e){var t=[];t=e.target.value.split(";"),t=Object(ae.a)(new Set(t)),this.setState({emails:t})}},{key:"handleValidation",value:function(e,t){var a=this;console.log("user",e);var n=this.state.dataToSend;n.user=e,this.setState({dataToSend:n});var s="";console.log("data to be sended ",this.state.dataToSend),s="add"===t?"courses/addTeacher":"courses/removeTeacher";var r=this.state.currentTeachers,i=this.state.selectedAccounts;W.postToServer(s,this.state.dataToSend).then(function(n){console.log("teacher response ",n),200===n.status&&("add"===t?(r.push(e),i=i.filter(function(t,a){return t.email!==e.email})):(i.push(e),r=r.filter(function(t,a){return t.email!==e.email}),console.log("response",n.data)),a.setState({currentTeachers:r,selectedAccounts:i}))})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"search-and-list-accounts-block"},s.a.createElement("div",{className:"div-search-block "},s.a.createElement(H,Object.assign({},{type:"text",name:"input-user-search",className:"search-input form-helper-input ",placeholder:"Email, Name , Surname, pseudo (Username)"},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement("div",{className:"div-img-search"},s.a.createElement("img",{src:"/images/search.png",alt:"Search",onClick:function(t){return e.handleValidateSearch(t)},className:"button-image-user-search"}))),s.a.createElement("div",null,this.state.selectedAccounts.map(function(t,a){return s.a.createElement(xe,{user:t,key:a,handleValidation:function(){return e.handleValidation(t,"add")}})})),s.a.createElement("div",null,this.state.currentTeachers.map(function(t,a){return s.a.createElement(xe,{user:t,key:a,current:!0,handleValidation:function(){return e.handleValidation(t,"remove")}})})),s.a.createElement("div",null,0===this.state.selectedAccounts.length?"No Result For the Moment!":""))}}]),t}(n.Component),qe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalVisibility:!1,modalChildren:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleNewTeacherClick",value:function(){this.setState({modalVisibility:!0,modalChildren:s.a.createElement(Ve,{course:this.props.course})})}},{key:"handleModalClose",value:function(){this.setState({modalVisibility:!1,modalChildren:""})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleModalClose()}},this.state.modalChildren),s.a.createElement(Z,Object.assign({name:"newteacher",value:"Assign a Teacher",className:"form-helper-button hr-button-block success"},{onClick:function(t){return e.handleNewTeacherClick(t)}})))}}]),t}(n.Component),De=a(9),Ae=a.n(De),_e=a(10),Qe=(a(247),["header","bold","italic","underline","strike","blockquote","list","bullet","indent","align","link","image","formula"]),Pe={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{size:["small",!1,"large","huge"]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","formula"],["clean"]]};function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?s.a.createElement(Ae.a,{value:e||"",modules:{toolbar:!1},readOnly:!0}):""}function Fe(e,t,a){console.log(" you're about to delete"),console.log(" collection",e,"data",t),W.postToServer("/crudOperations/delete",{collection:e,data:t}).then(function(e){200===e.status?a&&a():console.log("deletion error",e.data.errorMessage)})}var Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:a.props.title||"",content:a.props.content||""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value}),console.log(this.state)}},{key:"handleChange",value:function(e){this.setState({content:"<p><br></p>"===e?"":e}),console.log(this.state)}},{key:"handleValidation",value:function(){if(0!==this.state.title.length)return this.props.validation(this.state);alert(" The Title Should not be empty !!")}},{key:"handleCancel",value:function(){this.props.handleCancel()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(H,Object.assign({name:"title",value:this.state.title,placeholder:"Title",label:"Title"},{onChange:function(t){return e.handleChangeTitle(t)}})),function(e){var t=e.content,a=e.defaultValue,n=void 0===a?"":a,r=e.handleChange,i=e.label,l=void 0===i?"":i,o=e.placeholder,c=void 0===o?"":o;return s.a.createElement("div",{className:"element-field"},s.a.createElement(J,{label:l}),s.a.createElement(Ae.a,{value:t||n,modules:Pe,formats:Qe,placeholder:c,onChange:r}))}({content:this.state.content,handleChange:function(t){return e.handleChange(t)},label:"Content",placeholder:"Content"}),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"validate",value:"Validate",className:"form-helper-button success"},{onClick:function(){return e.handleValidation()}})),s.a.createElement(Z,Object.assign({name:"annuler",value:"Annuler",className:"form-helper-button danger"},{onClick:function(){return e.handleCancel()}}))))}}]),t}(n.Component),Le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:"",content:"",mode:a.props.mode||"creation"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.subsection&&this.setState(Object.assign({},this.state,Object(_e.a)({},this.props.subsection),{mode:this.props.mode||"lecture"}))}},{key:"setNewValues",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.updateElementInDataBase("subsections",{_id:this.state._id},t);case 2:a=e.sent,console.log("update result ",a),this.setState(Object(_e.a)({},t)),this.props.closeModal();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleModifySubSection",value:function(){var e=this,t=s.a.createElement(Re,{title:this.state.title,content:this.state.content,handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.setNewValues(t)}});this.props.openModal(t)}},{key:"handleDeleteSubSection",value:function(){var e=this;Fe("subsections",this.state,function(){e.props.handleUpdateSubSections(e.state,"delete")})}},{key:"displayOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"modifySubSection",value:"Modify Sub Section",className:"form-helper-button"},{onClick:function(){e.handleModifySubSection()}})),s.a.createElement(Z,Object.assign({name:"deleteSubSection",value:"Delete Sub Section",className:"form-helper-button danger"},{onClick:function(){e.handleDeleteSubSection()}})))}},{key:"displayContent",value:function(){return s.a.createElement("div",null,s.a.createElement("h5",null,this.state.title),Ie(this.state.content))}},{key:"render",value:function(){return s.a.createElement("div",{className:"sub-elements-content"},this.displayOptions(),s.a.createElement("div",{className:"content-from-quill"}," ",this.displayContent()))}}]),t}(n.Component),Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:"",content:"",subsections:[],mode:a.props.mode||"creation"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.section&&this.setState(Object.assign({},this.state,Object(_e.a)({},this.props.section),{mode:this.props.mode||"update"}))}},{key:"setNewValues",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.updateElementInDataBase("sections",{_id:this.state._id},t);case 2:a=e.sent,console.log("update result ",a),this.setState(Object(_e.a)({},t)),this.props.closeModal();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleModifySection",value:function(){var e=this,t=s.a.createElement(Re,{title:this.state.title,content:this.state.content,handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.setNewValues(t)}});this.props.openModal(t)}},{key:"handleDeleteSection",value:function(){var e=this;Fe("sections",this.state,function(){e.props.handleUpdateSections(e.state,"delete")})}},{key:"displayOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"modifySection",value:"Modify Section",className:"form-helper-button"},{onClick:function(){e.handleModifySection()}})),s.a.createElement(Z,Object.assign({name:"deleteSubSection",value:"Delete Section",className:"form-helper-button danger"},{onClick:function(){e.handleDeleteSection()}})))}},{key:"addSubSection",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n,s,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.subsections,n={_id:this.state._id,title:this.state.title,content:this.state.content,subsections:this.state.subsections},s={element:{elementName:"section",elementProperties:n},childelement:t},e.next=5,W.postToServer("courses/newSubElement",s).then(function(e){if(200===e.status)return e.data});case 5:r=e.sent,console.log("inserted SubSection",r),a.push(r),this.setState({subsections:a}),this.props.closeModal();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddSubSection",value:function(){var e=this,t=s.a.createElement(Re,{handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.addSubSection(t)}});this.props.openModal(t)}},{key:"displayContent",value:function(){return s.a.createElement("div",null,s.a.createElement("h4",null,this.state.title),Ie(this.state.content))}},{key:"handleUpdateSubSections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("update"===t);else if("delete"===t){var a=this.state.subsections;a=a.filter(function(t,a){return t._id!==e._id}),this.setState({subsections:a})}}},{key:"showSubSections",value:function(){var e=this;return s.a.createElement("div",{className:"sub-element-content"},this.state.subsections.map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement(Le,{subsection:t,mode:e.state.mode,openModal:function(t){return e.props.openModal(t)},closeModal:function(){return e.props.closeModal()},handleUpdateSubSections:function(t,a){return e.handleUpdateSubSections(t,a)}}))}))}},{key:"newSubSectionOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"newSubSectionButton",value:"+ Sub Section",className:"form-helper-button"},{onClick:function(){return e.handleAddSubSection()}})))}},{key:"render",value:function(){return s.a.createElement("div",null,this.displayOptions(),s.a.createElement("div",{className:"content-from-quill"}," ",this.displayContent()," "),this.newSubSectionOptions(),s.a.createElement("div",null,this.showSubSections()))}}]),t}(n.Component),Ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:"",content:"",sections:[],mode:a.props.mode||"creation"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.chapter&&this.setState(Object.assign({},this.state,Object(_e.a)({},this.props.chapter),{mode:this.props.mode||"lecture"}))}},{key:"setNewValues",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.updateElementInDataBase("chapters",{_id:this.state._id},t);case 2:a=e.sent,console.log("update result ",a),this.setState(Object(_e.a)({},t)),this.props.closeModal();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleModifyChapter",value:function(){var e=this,t=s.a.createElement(Re,{title:this.state.title,content:this.state.content,handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.setNewValues(t)}});this.props.openModal(t)}},{key:"displayOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"modifyChapter",value:"Modify Chapter",className:"form-helper-button"},{onClick:function(){e.handleModifyChapter("modify")}})))}},{key:"addSection",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n,s,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.sections,n={_id:this.state._id,title:this.state.title,content:this.state.content,sections:this.state.sections},s={element:{elementName:"chapter",elementProperties:n},childelement:t},e.next=5,W.postToServer("courses/newSubElement",s).then(function(e){if(200===e.status)return e.data});case 5:r=e.sent,console.log("inserted Section",r),a.push(r),this.setState({sections:a}),this.props.closeModal();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddSection",value:function(){var e=this,t=s.a.createElement(Re,{handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.addSection(t)}});this.props.openModal(t)}},{key:"displayContent",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",null,this.state.title),s.a.createElement("div",{className:"content-div"},Ie(this.state.content)))}},{key:"showSections",value:function(){var e=this;return s.a.createElement("div",{className:"sub-element-content"},this.state.sections.map(function(t,a){return s.a.createElement(Be,{section:t,key:a,mode:e.state.mode,openModal:function(t){return e.props.openModal(t)},closeModal:function(){return e.props.closeModal()},handleUpdateSections:function(t,a){return e.handleUpdateSections(t,a)}})}))}},{key:"newSectionOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"newSectionButton",value:"+ Section",className:"form-helper-button"},{onClick:function(){return e.handleAddSection()}})))}},{key:"handleUpdateSections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("update"===t);else if("delete"===t){var a=this.state.sections;a=a.filter(function(t,a){return t._id!==e._id}),this.setState({sections:a})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"content-div"},s.a.createElement("div",{className:"chapter-upper-nav"},s.a.createElement("div",{onClick:function(){return e.props.reopenCourse()},className:"nav-link-div"},"return to course")),this.displayOptions(),s.a.createElement("div",{className:"content-from-quill"}," ",this.displayContent()," "),this.newSectionOptions(),s.a.createElement("div",null,this.showSections()))}}]),t}(n.Component),ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={course:"",departments:[],department:a.props.department||"",specialities:[],speciality:a.props.speciality||"",levels:[],level:a.props.level||"",mode:a.props.mode},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.postToServer("crudOperations/get",{collection:"departments"}).then(function(e){200===e.status?(console.log("departments",e.data),t.setState({departments:e.data})):console.log("errpr getting departments",e.data)});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"handleElementChange",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n,s,r=this,i=arguments;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=i.length>1&&void 0!==i[1]?i[1]:"",n=t.target.value,e.t0=a,e.next="departments"===e.t0?5:"specialities"===e.t0?10:"levels"===e.t0?17:20;break;case 5:return e.next=7,this.setState({specialities:[],levels:[]});case 7:return e.next=9,W.postToServer("crudOperations/get",{collection:"specialities",options:{queries:{department:n}}}).then(function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=8;break}return console.log("specialities result",t.data),a="",r.state.departments.forEach(function(e,t){e._id===n&&(a=r.state.departments[t])}),e.next=6,r.setState({department:a,specialities:t.data});case 6:e.next=9;break;case 8:console.log("error getting specialities",t.data.errorMessage);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("break",21);case 10:return s="",e.next=13,this.setState({levels:[]});case 13:return this.state.specialities.forEach(function(e,t){e._id===n&&(s=r.state.specialities[t])}),e.next=16,this.setState({speciality:s,levels:s.levels||[]});case 16:return e.abrupt("break",21);case 17:return e.next=19,this.setState({level:this.state.levels[n]});case 19:case 20:return e.abrupt("break",21);case 21:return e.next=23,this.props.setCourseAdminValues({department:this.state.department,speciality:this.state.speciality,level:this.state.level});case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showElements",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a="";if(t&&"levels"!==t?a={name:t,type:"select",options:this.state[t],value:"_id",display:"label"}:"levels"===t&&(a={name:t,type:"select",options:this.state[t]}),this.state[t].length>0&&a)return s.a.createElement("div",{className:"course-administration-block"},s.a.createElement("h4",null,t.toLocaleUpperCase()),s.a.createElement(ee,Object.assign({},a,{onChange:function(a){return e.handleElementChange(a,t)}})))}},{key:"handleUpdate",value:function(){this.props.modifyCourseAdministration()}},{key:"displayContent",value:function(){var e=this;return"creation"===this.state.mode||"update"===this.state.mode?s.a.createElement("div",{className:"course-administration-section"},this.showElements("departments"),this.showElements("specialities"),this.showElements("levels"),"update"===this.state.mode?s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"modifycourseadmin",value:"Modify",className:"form-helper-button success"},{onClick:function(){return e.handleUpdate()}}))):""):this.displayCurrentValues()}},{key:"displayCurrentValues",value:function(){return s.a.createElement("div",{className:"course-administration-values"},s.a.createElement("div",null,"Department : ",this.state.department.label),s.a.createElement("div",null,"Speciality : ",this.state.speciality.label),s.a.createElement("div",null,"Level : ",this.state.level))}},{key:"render",value:function(){return s.a.createElement("div",null,this.displayContent())}}]),t}(n.Component),We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={department:"",speciality:"",level:"",title:"",content:"",chapters:[],mode:a.props.mode||"creation"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.course){e.next=4;break}return e.next=3,this.setState(Object.assign({},this.state,Object(_e.a)({},this.props.course)));case 3:console.log("course state ",this.state);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCourseAdminValues",value:function(){var e=Object(k.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(t);case 2:console.log("course state ",this.state);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setNewValues",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.updateElementInDataBase("courses",{_id:this.state._id},t);case 2:a=e.sent,console.log("update result ",a),this.setState(Object(_e.a)({},t)),this.props.closeModal();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveNewCourse",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.department&&this.state.speciality&&this.state.level){e.next=4;break}B("Make Sure, You have specified Department, Speciality and the Level !!"),e.next=9;break;case 4:return a=Object.assign({},{department:this.state.department,speciality:this.state.speciality,level:this.state.level,title:this.state.title,content:this.state.content,chapters:this.state.chapters},t),e.next=7,W.insertElementInDataBase("courses",a);case 7:this.setState(Object.assign({},a,{mode:"update"})),this.props.closeModal();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleModifyCourse",value:function(){var e=this,t="new"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new")?s.a.createElement(s.a.Fragment,null,s.a.createElement(ze,{mode:this.state.mode,setCourseAdminValues:function(t){return e.setCourseAdminValues(t)}}),s.a.createElement(Re,{handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.saveNewCourse(t)}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(Re,{title:this.state.title,content:this.state.content,handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.setNewValues(t)}}));this.props.openModal(t)}},{key:"displayOptions",value:function(){var e=this;return"update"===this.state.mode?s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"modifyCourse",value:"Modify Course",className:"form-helper-button"},{onClick:function(){e.handleModifyCourse("modify")}}))):"creation"===this.state.mode?s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"modifyCourse",value:"New Course",className:"form-helper-button"},{onClick:function(){e.handleModifyCourse()}}))):void 0}},{key:"addChapter",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n,s,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.chapters,n={_id:this.state._id,title:this.state.title,content:this.state.content,chapters:this.state.chapters},s={element:{elementName:"course",elementProperties:n},childelement:t},e.next=5,W.postToServer("courses/newSubElement",s).then(function(e){if(200===e.status)return e.data});case 5:r=e.sent,console.log("insertedChapter",r),a.push(r),this.setState({chapters:a}),this.props.closeModal();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddChapter",value:function(){var e=this,t=s.a.createElement(Re,{handleCancel:function(){return e.props.closeModal()},validation:function(t){return e.addChapter(t)}});this.props.openModal(t)}},{key:"modifyCourseAdministration",value:function(){console.log("about to modify"),this.state.department&&this.state.level&&W.postToServer("/crudOperations/update",{collection:"courses",data:{_id:this.state._id},update:{department:this.state.department,speciality:this.state.speciality,level:this.state.level}}).then(function(e){200===e.status?B("Document modified  with suceess !! "):B("Modification failed !!")})}},{key:"showCourseAdmin",value:function(){var e=this;return this.state.department&&this.state.level?s.a.createElement("div",null,s.a.createElement(ze,{mode:this.state.mode,department:this.state.department,speciality:this.state.speciality,level:this.state.level,setCourseAdminValues:function(t){return e.setCourseAdminValues(t)},modifyCourseAdministration:function(t){return e.modifyCourseAdministration(t)}}),s.a.createElement(ze,{mode:"read",department:this.state.department,speciality:this.state.speciality,level:this.state.level})):s.a.createElement("div",null,s.a.createElement(ze,{mode:this.state.mode,setCourseAdminValues:function(t){return e.setCourseAdminValues(t)},modifyCourseAdministration:function(t){return e.modifyCourseAdministration(t)}}))}},{key:"displayContent",value:function(){return s.a.createElement("div",null,this.showCourseAdmin(),s.a.createElement("h2",null," ",this.state.title),Ie(this.state.content))}},{key:"reopenCourse",value:function(){console.log("return to course"),this.props.reopenCourse()}},{key:"openChapter",value:function(e){var t=this,a=s.a.createElement(Ue,{chapter:e,openModal:function(e){return t.props.openModal(e)},closeModal:function(){return t.props.closeModal()},mode:"update",reopenCourse:function(){return t.reopenCourse()}});this.props.displayElement(a)}},{key:"handleUpdateChapters",value:function(e,t){if("update"===t);else if("delete"===t){var a=this.state.chapters;a=a.filter(function(t,a){return t._id!==e._id}),this.setState({chapters:a})}}},{key:"handleDeleteChapter",value:function(e,t){var a=this;e.stopPropagation(),Fe("chapters",t,function(){a.handleUpdateChapters(t,"delete")})}},{key:"deleteChapterOptions",value:function(e){var t=this;return s.a.createElement(Z,Object.assign({name:"deletechapter",value:"Delete Chapter",className:"form-helper-button danger"},{onClick:function(a){t.handleDeleteChapter(a,e)}}))}},{key:"showChapters",value:function(){var e=this;return s.a.createElement("div",{className:"sub-elements-list"},this.state.chapters.map(function(t,a){return s.a.createElement("div",{key:a,onClick:function(){return e.openChapter(t)},className:"sub-element-div options-tooltip"},s.a.createElement("div",{className:"chapter-title"},t.title),s.a.createElement("div",{className:"options-tooltip-text"},e.deleteChapterOptions(t)))}))}},{key:"newChapterOptions",value:function(){var e=this;if("update"===this.state.mode)return s.a.createElement("div",{className:"create-course-options-div"},s.a.createElement(Z,Object.assign({name:"newChapterButton",value:"+ Chapter",className:"form-helper-button"},{onClick:function(){return e.handleAddChapter()}})))}},{key:"render",value:function(){return s.a.createElement("div",null,this.displayOptions(),s.a.createElement("div",{className:"content-from-quill"}," ",this.displayContent()," "),this.newChapterOptions(),s.a.createElement("div",null,this.showChapters()))}}]),t}(n.Component),Je=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={course:a.props.course||{},elementToDisplay:"",mode:a.props.mode||"creation",modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.a.createElement(We,{mode:this.state.mode,openModal:function(e){a.openModal(e)},closeModal:function(){return a.handleModalClose()},course:this.state.course,displayElement:function(e){return a.displayElement(e)},reopenCourse:function(){return a.reopenCourse()}}),e.next=3,this.setState({elementToDisplay:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"openModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"handleModalClose",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"reopenCourse",value:function(){this.componentDidMount()}},{key:"displayElement",value:function(e){this.setState({elementToDisplay:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"course-creation-main"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleModalClose()}},this.state.modalChildren),s.a.createElement("div",{className:"course-creation-panel"},this.state.elementToDisplay))}}]),t}(n.Component),Ke=(a(248),{courses:"chapters",chapters:"sections",sections:"subsections"}),Ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selected:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleClick",value:function(e){window.scrollTo(0,document.getElementById(e).offsetTop)}},{key:"displayTitle",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"courses";return s.a.createElement("div",{className:"course-title-div"},s.a.createElement("div",{className:"nav-course-title "+this.state.selected,onClick:function(){return t.handleClick(e._id)}},e.title),e.hasOwnProperty(Ke[a])&&e[Ke[a]].length>0?s.a.createElement("div",{className:"course-nav-sub-titles-div"},e[Ke[a]].map(function(e,n){return s.a.createElement(s.a.Fragment,{key:n},t.displayTitle(e,Ke[a]))})):"")}},{key:"render",value:function(){return s.a.createElement("div",{className:"course-navigator-main-div"},s.a.createElement("h3",{className:"course-nav-title"},"Navigation Panel"),this.displayTitle(this.props.course))}}]),t}(n.Component),He={title:"",content:"<p> Sorry this course is not availaible !!</p>"},$e={courses:"chapters",chapters:"sections",sections:"subsections"};function Ze(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"courses";if(e&&(e.content||e.title)){var n=e._id||e;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"title-div",id:n},s.a.createElement("h2",null,e.title)),s.a.createElement("div",{className:"content-div"},(t=e.content,s.a.createElement(Ae.a,{value:t||"",modules:{toolbar:!1},readOnly:!0}))),s.a.createElement("div",{className:"sub-element-content"},function(e,t){if(e.hasOwnProperty($e[t])&&e[$e[t]].length>0){var a=e[$e[t]].map(function(e,a){return s.a.createElement(s.a.Fragment,{key:a},Ze(e,$e[t]))});return a}return""}(e,a)))}}var Ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={courseToDisplay:{},ready:!1,modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;W.postToServer("/courses/getHoleCourse",{course:this.props.match.params.id}).then(function(t){200===t.status?(console.log("hole course result",t.data),e.setState({courseToDisplay:t.data,ready:!0})):(e.setState({courseToDisplay:He,ready:!0}),console.log("Error getting hole course",t.data.errorMessage))})}},{key:"displayCourse",value:function(){return this.state.ready?Ze(this.state.courseToDisplay,"courses",this.addRef):s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("img",{alt:"",src:"/images/al.gif"}))}},{key:"openModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"closeModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"modifyCourse",value:function(){var e=s.a.createElement(Je,{course:this.state.courseToDisplay,mode:"update"});this.openModal(e)}},{key:"deleteCourse",value:function(){var e={collection:"courses",data:this.state.courseToDisplay};W.postToServer("/crudOperations/delete",e).then(function(e){200===e.status?(console.log("deletion result ",e),alert("Course Delete !!")):(console.log("deletion error ",e.data.errorMessage||e),alert("deletion error"))})}},{key:"displayOptions",value:function(){var e=this;return this.state.ready?s.a.createElement(s.a.Fragment,null,s.a.createElement(qe,{course:this.state.courseToDisplay}),s.a.createElement(Z,Object.assign({name:"modifycoursebutton",value:"Modify Course",className:"form-helper-button success"},{onClick:function(){return e.modifyCourse()}})),s.a.createElement(Z,Object.assign({name:"deletecourse",value:"Delete Course",className:"form-helper-button danger"},{onClick:function(){return e.deleteCourse()}}))):""}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ye,{course:this.state.courseToDisplay}),s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),s.a.createElement("div",{className:"hr-button-block course-options"},this.displayOptions()),s.a.createElement("div",{className:"course-content-div"},s.a.createElement("div",null,this.displayCourse())))}}]),t}(n.Component),Xe=(a(249),a(33)),et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","align","link","image","formula"],a.modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","formula"],["clean"]]},a.state={text:e.text,delta:{}},a.handleChange=a.handleChange.bind(Object(Xe.a)(Object(Xe.a)(a))),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e,t,a,n){console.log("get content",n.getContents(),"source",a),this.setState({text:e,delta:n.getContents(),other:{source:a,editor:n.getContents()}}),this.props.onChange&&this.props.onChange({text:e,delta:n.getContents()})}},{key:"buttons",value:function(){var e=this;return s.a.createElement("div",{className:"hr-button-block"},this.props.onValidate?s.a.createElement(Z,Object.assign({name:"valider",value:"Validate",className:"form-helper-button success"},{onClick:function(){return e.props.onValidate({text:e.state.text,delta:e.state.delta})}})):"")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ae.a,{value:this.state.text,modules:this.modules,onChange:this.handleChange,formats:this.formats}),s.a.createElement("div",null,this.buttons()))}}]),t}(n.Component),tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:L(),name:"",email:"",contact:"",message:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSubmitMessage",value:function(e){if(console.log("state message ",this.state),0===this.state.name.length||0===this.state.email.length||0===this.state.message.length)alert("Veuillez Remplir tous Les Champs SVP !!");else{console.log("sending message ...");var t=W.insertElementInDataBase("messages",{name:this.state.name,email:this.state.email,contact:this.state.contact,message:this.state.message});console.log("inserted message ",t)}}},{key:"handleChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(Object(_e.a)({},t))}},{key:"handleMessageChange",value:function(e){console.log("message",e),this.setState({message:e.text})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h2",{className:"contacts-session-title"}," Nous Envoyer un Message !! "),s.a.createElement("div",null,"Pour toute suggestion ou pr\xe9occupation concernant cette plate-forme, vous pouvez nous envoyer un email via l\u2019interface suivante, et nous vous r\xe9pondrons."),s.a.createElement("div",{className:"contacts-message-form"},s.a.createElement(ee,Object.assign({type:"text",name:"name",label:"Nom"},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement(ee,Object.assign({type:"email",name:"email",label:"Email"},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement(ee,Object.assign({type:"number",name:"contact",label:"Contact",placeholder:"Phone Contact"},{onChange:function(t){return e.handleChange(t)}})),s.a.createElement("h4",null,"Message"),s.a.createElement(et,{text:this.state.message,onChange:function(t){return e.handleMessageChange(t)},onValidate:function(t){return e.handleSubmitMessage(t)}})))}}]),t}(n.Component),at=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"contacts-container"},s.a.createElement("h2",{className:"contacts-session-title"},"Qui Nous Sommes ?"),s.a.createElement("div",{className:"contacts-about-us"},"Palais de la micro. Services informatiques. creation de logiciels pour entreprises"),s.a.createElement("h2",{className:"contacts-session-title"},"Nos Travaux"),s.a.createElement(tt,null))}}]),t}(n.Component),nt=(a(250),a(121)),st=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:a.props.user,dataToSend:{}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=this.state.dataToSend;t[e.target.name]=e.target.value,0===e.target.value.length&&delete t[e.target.name],this.setState({dataToSend:t}),console.log("new Data to send ",this.state.dataToSend)}},{key:"verifyFields",value:function(){var e=this,t={status:!0,message:"Ok"},a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Aucune modification apport\xe9e !!";return t.status=e,t.message=a,t},n=this.state.dataToSend,s=Object.keys(n);if(0===s.length)return a(!1,"Aucune Modification appliqu\xe9e");if(s.indexOf("email")>-1&&!ie(n.email))return a(!1,"Email non valide !!");if(s.indexOf("currentpassword")>-1){if(n.currentpassword!==this.state.user.password)return a(!1,"Passwords doesn't Match");n.password=n.currentpassword,delete n.currentpassword}if(s.indexOf("newpassword")>-1||s.indexOf("confirmedpassword")>-1){if(n.newpassword!==n.confirmedpassword)return a(!1,"Passwords doesn't Match");if(!le(n.newpassword||""))return a(!1,"New password not valide");n.password=n.newpassword,delete n.newpassword,delete n.currentpassword,delete n.confirmedpassword}var r=!1;return s.forEach(function(t){console.log("state :  "+e.state.user[t]+" curr : "+n[t]),e.state.user[t]!==n[t]&&(r=!0)}),r?a(!0,"ok"):a()}},{key:"handleValidation",value:function(){var e=this.verifyFields();console.log("verification ",e),e.status?console.log("dataTosend",this.state.dataToSend):alert(e.message)}},{key:"render",value:function(){var e=this,t=[{name:"email",type:"email",placeholder:"Email",label:"Email",value:this.state.user.email},{name:"pseudo",type:"text",placeholder:"UserName",label:"Pseudo",value:this.state.user.pseudo},{name:"currentpassword",type:"text",placeholder:"Current Password",label:"Mot de Passe Actuel"},{name:"newpassword",type:"password",placeholder:"New Password",label:"Nouveau Mot de Passe",required:!0},{name:"confirmedpassword",type:"password",placeholder:"Confirm Password",label:"Nouveau Mot de Passe"}];return s.a.createElement("div",{className:"user-profile-modify-connexion-params"},s.a.createElement("form",null,t.map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement(ee,Object.assign({},t,{onChange:function(t){e.handleChange(t)}})))}),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({type:"button",name:"newConnexionParamsbtn",value:"Validate",className:"form-helper-button warning"},{onClick:function(){return e.handleValidation()}}))," ")))}}]),t}(n.Component),rt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={user:L(),taughtCourses:[],followedCourses:[],modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.findTaughtCourses(),this.findFollowedCourses()}},{key:"displayUserInformations",value:function(){var e=this;return s.a.createElement("div",{className:"user-profile-informations"},["name","surname","contact","pseudo","email","address"].map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("div",null,t.toLocaleLowerCase()),s.a.createElement("div",null,e.state.user[t]||"none"))}))}},{key:"findTaughtCourses",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={collection:"courses",elements_ids:this.state.user.teacher,fields:""},e.next=3,W.postToServer("courses/getAllWithIds",t).then(function(e){200===e.status?(console.log("result for user teacher",e.data),a.setState({taughtCourses:e.data})):console.log("Error Message",e.data.errorMessage)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"displayTaughtCourses",value:function(){return s.a.createElement("div",null,s.a.createElement(Ne,{courses:this.state.taughtCourses}))}},{key:"findFollowedCourses",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={collection:"courses",elements_ids:this.state.user.student,fields:""},e.next=3,W.postToServer("courses/getAllWithIds",t).then(function(e){200===e.status?a.setState({followedCourses:e.data}):console.log("Error Message",e.data.errorMessage)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"openModal",value:function(e){console.log("about to open modal"),this.setState({modalChildren:e,modalVisibility:!0})}},{key:"handleModalClose",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"modifyAvatar",value:function(){}},{key:"handleModifValidation",value:function(e){if(console.log(" modif datatosend ",e),Object.keys(e).length>0){var t={collection:"users",options:{queries:{_id:this.state.user._id}}};W.postToServer("/crudOperations/get",t).then(function(t){if(console.log("getting user response ",t),200===t.status)if(t.data.length>0){var a=t.data[0];console.log("user found ",a);var n={collection:"users",data:a,update:e};W.postToServer("/crudOperations/update",n).then(function(e){200===e.status?console.log("Update success"):console.log("update error ",e.data.errorMessage)})}else alert("User Verification Failed !!")})}else alert(" Aucune modification effectu\xe9e !!"),this.handleModalClose()}},{key:"modifyInformations",value:function(){var e=this,t={collection:"users",title:"users",fields:[{name:"name",type:"text",placeholder:"Name",label:"Nom",value:this.state.user.name},{name:"surname",type:"text",placeholder:"SurName",label:"Prenom",value:this.state.user.surname},{name:"address",type:"text",placeholder:"Address",label:"Adresse",value:this.state.user.address},{name:"contact",type:"number",placeholder:"Tel1/Tel2 ",label:"Telephone",value:this.state.user.contact}]},a=s.a.createElement("div",null,s.a.createElement(te,{data:t,modificationForm:!0,handleValidation:function(t){return e.handleModifValidation(t)}}));console.log("modification of parameters"),this.openModal(a)}},{key:"newConnexionParameters",value:function(){var e=this;this.openModal(s.a.createElement(st,{handleModalClose:this.handleModalClose(),handleModifValidation:function(t){return e.handleModifValidation(t)},user:this.state.user}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"user-profile-main-div"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleModalClose()}},this.state.modalChildren),s.a.createElement("h2",{className:"user-profile-title"},"Profile Utilisateur"),s.a.createElement("h3",{className:"session-title"},"Avatar",s.a.createElement(Z,Object.assign({name:"changeAvatar",value:"modifier",className:"form-helper-button success"},{OnClick:function(){return e.modifyAvatar()}}))),s.a.createElement("div",{className:"user-profile-avatar"},s.a.createElement("div",null,s.a.createElement("figure",{className:"user-profile-avatar"},s.a.createElement(nt.Image,{cloudName:"demo",publicId:"sample",width:"200",crop:"scale"})))),s.a.createElement("h3",{className:"session-title"},"User Informations",s.a.createElement(Z,Object.assign({name:"modifyinformations",value:"Modifier Mes Informations",className:"form-helper-button success"},{onClick:function(){return e.modifyInformations()}}))),this.displayUserInformations(),s.a.createElement("h3",{className:"session-title"},"Connexion Parameters",s.a.createElement(Z,Object.assign({name:"modifyinformations",value:"Changer Les Param\xe8tres de Connexion",className:"form-helper-button success"},{onClick:function(){return e.newConnexionParameters()}}))),s.a.createElement("h3",{className:"session-title"},"Taught Courses"),s.a.createElement("div",{className:"user-profile-taught-courses-div"},s.a.createElement(Ne,{courses:this.state.taughtCourses})),s.a.createElement("h3",{className:"session-title"},"Followed Courses"),s.a.createElement("div",{className:"user-profile-followed-courses-div"},s.a.createElement(Ne,{courses:this.state.followedCourses})))}}]),t}(n.Component),it=(a(317),a(318),{courses:"chapters",chapters:"sections",sections:"subsections"}),lt=[{title:s.a.createElement("img",{alt:"",src:"images/al.gif"})}],ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={element:a.props.element,level:a.props.level,subElements:[],selected:a.props.selectionState},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleElementClick",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.setSelectedElement(this.props.element,this.props.level),!(it[this.state.level]&&this.props.element.hasOwnProperty(it[this.state.level])&&this.props.element[it[this.state.level]].length>0)){e.next=6;break}return this.setState({subElements:[]}),this.setState({subElements:lt}),e.next=6,W.postToServer("/courses/getAllWithIds",{collection:it[this.state.level],elements_ids:this.state.element[it[this.state.level]],fields:["_id","title",it[it[this.state.level]]]}).then(function(e){200===e.status?(t.setState({subElements:[]}),t.setState({subElements:e.data})):alert(e.data.errorMessage)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"selectionState",value:function(){return this.state.selected?"selected-element-div":"element-div"}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:this.selectionState(),onClick:function(){return e.handleElementClick()}},this.state.element.title),s.a.createElement("div",{className:"sub-elements-div"},this.state.subElements.map(function(a,n){return s.a.createElement("div",{key:n},s.a.createElement(t,{element:a,level:it[e.state.level],selectionState:e.props.selectionState,setSelectedElement:e.props.setSelectedElement,handleUnSelectAll:function(){return e.props.handleUnSelectAll()}}))})))}}]),t}(n.Component),ct=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={courses:[],selectionState:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.getFromServer("/courses/getAll").then(function(t){200===t.status?e.setState({courses:t.data}):alert(t.data.errorMessage)})}},{key:"handleUnSelectAll",value:function(){this.setState({selectionState:!1})}},{key:"displayElements",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"courses";return(arguments.length>1?arguments[1]:void 0).map(function(a,n){return s.a.createElement("div",{key:n},s.a.createElement(ot,{element:a,level:t,setSelectedElement:e.props.setSelectedElement,selectionState:e.state.selectionState,handleUnSelectAll:function(){return e.handleUnSelectAll()}}))})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",{className:"nav-title"},"Navigation "),this.displayElements("courses",this.state.courses))}}]),t}(n.Component),ut=(a(319),a(320),["header","bold","italic","underline","strike","blockquote","list","bullet","indent","align","link","image","formula"]),dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mcq:a.props.mcq,modalVisibility:!1,modalChildren:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleCloseModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"handleOpenModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"showCourse",value:function(){var e=this,t=this.state.mcq.reference,a=this.state.mcq.course_level,n={elements_ids:[t],elements_collection:a};console.log("dataTo send ",n),"courses"===a?W.postToServer("/courses/getHoleCourse",{course:t}).then(function(t){200===t.status?(console.log("hole course result",t.data),e.handleOpenModal(s.a.createElement("div",{className:"mcq-help-explanation-div"},Ze(t.data||"","courses")))):console.log("Error getting hole course",t.data.errorMessage)}):W.postToServer("/courses/getCourseElements",n).then(function(t){200===t.status?(console.log("element result",t.data),e.handleOpenModal(s.a.createElement("div",{className:"mcq-help-explanation-div"},Ze(t.data[0]||"",a)))):console.log("error message ",t.data.errorMessage)})}},{key:"showExplanation",value:function(){var e=s.a.createElement("div",null,s.a.createElement("h3",null,"Explanation"),s.a.createElement(Ae.a,{value:this.state.mcq.explanation,modules:{toolbar:!1},formats:ut,readOnly:!0}));this.handleOpenModal(s.a.createElement("div",{className:"mcq-help-explanation-div"}," ",e))}},{key:"displayOptions",value:function(){var e=this;return this.state.mcq.explanation.length>0?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mcq-help-option-div",onClick:function(){return e.showCourse()}},"Visiter Le Cours"),s.a.createElement("div",{className:"mcq-help-option-div",onClick:function(){return e.showExplanation()}},"Explication")):s.a.createElement("div",{className:"mcq-help-option-div",onClick:function(){return e.showCourse()}},"Visiter Le Cours")}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleCloseModal()}},this.state.modalChildren),this.displayOptions())}}]),t}(n.Component),mt=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","align","link","image","formula"],ht={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","formula"],["clean"]]},pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mcq:a.props.mcq,selectedAnswers:a.props.selectedAnswers||[],mode:a.props.mode||"test"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleSelectAnswer",value:function(e,t){var a=this.state.selectedAnswers;e.target.checked?-1===a.indexOf(t)&&a.push(t):a.indexOf(t)>-1&&a.splice(a.indexOf(t),1),console.log("new selected Answers ",a)}},{key:"showCorrectAnswers",value:function(e){if(this.state.mcq.rightAnswers.indexOf(e)>-1&&"correctedAndWrong"===this.state.mode)return s.a.createElement("div",{className:"mcq-right-answer-div"},s.a.createElement(K,{name:"rigthanswer"+e,checked:!0,readOnly:"correctedAndWrong"===this.state.mode||"correctedAndRight"===this.state.mode}))}},{key:"checkedStatus",value:function(e){return this.state.selectedAnswers.indexOf(e)>-1}},{key:"displayChoice",value:function(e,t){var a=this;return s.a.createElement("div",{key:t},s.a.createElement("div",{className:"one-choice-div"},s.a.createElement("div",null,s.a.createElement(Ae.a,{value:e,modules:{toolbar:!1},formats:mt,readOnly:!0})),s.a.createElement("div",null,s.a.createElement(K,Object.assign({name:"answer"+t,checked:this.checkedStatus(t),readOnly:"correctedAndWrong"===this.state.mode||"correctedAndRight"===this.state.mode},{onChange:function(e){return a.handleSelectAnswer(e,t)}})))),this.showCorrectAnswers(t))}},{key:"correctMCQ",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this.state.selectedAnswers).length){e.next=5;break}alert("aucune reponse selectionnee"),e.next=19;break;case 5:if(a=this.state.mcq.rightAnswers,console.log("right answers ",a,"selected answers ",t),n=t.filter(function(e,t){return!a.includes(e)}),s=a.filter(function(e,a){return!t.includes(e)}),0===n.length&&0===s.length){e.next=15;break}return e.next=12,this.setState({mode:"correctedAndWrong"});case 12:console.log("RANS",a,"WS",n,"RNS",s),e.next=17;break;case 15:return e.next=17,this.setState({mode:"correctedAndRight"});case 17:console.log("wrong selected ",n,"good not selected",s,"current Mode ",this.state.mode),this.props.getCorrectedMCQ?(console.log("ou correct"),console.log("state mode : ",this.state.mode),console.log("final state : ",this.state),this.props.getCorrectedMCQ(this.state)):console.log("no ou correct");case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"repeatMCQ",value:function(){this.setState({mode:"test"})}},{key:"displayButtons",value:function(){var e=this;if("test"===this.state.mode)return s.a.createElement(Z,Object.assign({name:"correctMCQbutton",value:"Valider",className:"form-helper-button success"},{onClick:function(){return e.correctMCQ()}}))}},{key:"displayHelpOptions",value:function(){if("correctedAndWrong"===this.state.mode)return s.a.createElement(dt,{mcq:this.state.mcq})}},{key:"displayMCQ",value:function(){var e=this,t=this.state.mcq;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"question-div"},s.a.createElement("h3",null," Question "),s.a.createElement(Ae.a,{value:t.question,modules:{toolbar:!1},formats:mt,readOnly:!0})),s.a.createElement("div",null,s.a.createElement("h3",null," Answers"),t.answers.map(function(t,a){return e.displayChoice(t,a)})),s.a.createElement("div",{className:"hr-button-block"},this.displayButtons()))}},{key:"render",value:function(){return s.a.createElement("div",{className:"realisedMCQ-div-"+this.state.mode},this.displayHelpOptions(),this.displayMCQ())}}]),t}(n.Component),vt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={reference:a.props.reference,course_level:a.props.course_level,mcqs:a.props.mcqs,modalVisibility:!1,modalChildren:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleViewMCQ",value:function(e){var t=s.a.createElement(ft,{mcq:e,action_level:"update"});this.openModal(t)}},{key:"handleRealiseMCQ",value:function(e){this.openModal(s.a.createElement(pt,{mcq:e}))}},{key:"handleDeleteMCQ",value:function(e){W.postToServer("/crudOperations/delete",{collection:"mcqs",data:e}).then(function(e){})}},{key:"displayMCQ",value:function(e,t){var a=this;return s.a.createElement("div",{key:t,className:"mcqs-list-one-div"},s.a.createElement(Ae.a,{value:e.question,modules:{toolbar:!1},formats:mt,readOnly:!0}),s.a.createElement("div",{className:" mcq-list-div-option "},s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"viewqcm",value:"View",className:"form-helper-button success"},{onClick:function(){return a.handleViewMCQ(e)}})),s.a.createElement(Z,Object.assign({name:"realisemcq",value:"Realise MCQ",className:"form-helper-button success"},{onClick:function(){return a.handleRealiseMCQ(e)}})),s.a.createElement(Z,Object.assign({name:"deleteqcm",value:"Delete",className:"form-helper-button danger"},{onClick:function(){return a.handleDeleteMCQ(e)}})))))}},{key:"openModal",value:function(e){this.setState({modalVisibility:!0,modalChildren:e})}},{key:"closeModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"render",value:function(){var e=this;return console.log("mcqs list",this.state.mcqs),s.a.createElement("div",null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),s.a.createElement("h3",null," List of MCQS"),s.a.createElement("div",{className:"mcqs-list-div"},this.state.mcqs.map(function(t,a){return e.displayMCQ(t,a)})))}}]),t}(n.Component),ft=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mcq_id:"",course_level:a.props.course_level||"",reference:a.props.reference||"",question:"",answers:a.retunDefaultAnswerArray(a.props.numberOfAnswer||5),rightAnswers:[],explanation:"",action_level:"creation"},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){if("update"===this.props.action_level){var e=this.props.mcq;this.setState({mcq_id:e._id,course_level:e.course_level,reference:e.reference,question:e.question,answers:e.answers,rightAnswers:e.rightAnswers,explanation:e.explanation,action_level:"update"})}}},{key:"retunDefaultAnswerArray",value:function(e){for(var t=[],a=1;a<=e;a++)t.push("");return t}},{key:"returnMCQField",value:function(e){var t=e.content,a=e.defaultValue,n=void 0===a?"":a,r=e.handleChange,i=e.label,l=void 0===i?"":i,o=e.placeholder,c=void 0===o?"":o;return s.a.createElement("div",{className:"mcqFieldDiv"},s.a.createElement(J,{label:l}),s.a.createElement(Ae.a,{value:t||n,modules:ht,formats:mt,placeholder:c,onChange:r}))}},{key:"handleChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"answer",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch("<p><br></p>"===e&&(e=""),console.log("here",e),t){case"question":this.setState({question:e});break;case"rightAnswer":var n=this.state.rightAnswers;e.target.checked?n.push(a):n.splice(n.indexOf(a),1),this.setState({rightAnswers:n});break;case"answer":var s=this.state.answers;s[a]=e,this.setState({answers:s});break;case"explanation":this.setState({explanation:e})}}},{key:"validateMCQ",value:function(){var e=this,t=this.state.question,a=[],n=[],s=this.state.explanation,r={valid:!0,message:"",dataToSend:{}};return 0===t.length?(r.valid=!1,r.message=" Veuillez Saisir une Question S.V.P !! ",r):0===(a=this.state.answers.filter(function(e,t){return e.length>0&&-1===a.indexOf(e)})).length?(r.valid=!1,r.message=" Veuillez Saisir des reponses S.V.P !! ",r):(a.forEach(function(t,a){e.state.rightAnswers.indexOf(e.state.answers.indexOf(t))>-1&&n.push(a)}),0===n.length?(r.valid=!1,r.message=" Au moins une r\xe9ponse juste est n\xe9cessaire !! ",r):(r.dataToSend={course_level:this.state.course_level,reference:this.state.reference,question:t,answers:a,rightAnswers:n,explanation:s},this.setState(Object(_e.a)({},r.dataToSend)),r))}},{key:"handleSaveNewMCQ",value:function(){var e=this,t=this.validateMCQ();t.valid?W.postToServer("/mcquestions/new",t.dataToSend).then(function(t){200===t.status?(console.log("response data ",t.data),e.setState({mcq_id:t.data,action_level:"update"}),alert("M.C.Q Saved with Success")):(alert("Sorry M.C.Q has not been saved !! "),console.log("error Message",t.errorMessage))}):alert(t.message)}},{key:"handleModifyMCQ",value:function(){var e=this.validateMCQ();if(e.valid){var t={documentToUpdate:{_id:this.state.mcq_id},updateToMake:e.dataToSend};W.postToServer("/mcquestions/modifyMCQ",t).then(function(e){200===e.status?alert("M.C.Q modified with Success"):(alert("Sorry M.C.Q has not been modified !! "),console.log("error Message",e.errorMessage))})}else alert(e.message)}},{key:"handleResetMCQ",value:function(e){"new"===e?this.setState({mcq_id:"",question:"",answers:this.retunDefaultAnswerArray(this.props.numberOfAnswer||5),rightAnswers:[],explanation:"",dataToSend:{},action_level:"creation"}):"modify"===e&&this.setState({question:"",answers:this.retunDefaultAnswerArray(this.props.numberOfAnswer||5),rightAnswers:[],explanation:"",dataToSend:{},action_level:"update"})}},{key:"handleDeleteMCQ",value:function(){var e=this;W.postToServer("/crudOperations/delete",{collection:"mcqs",data:{_id:this.state.mcq_id}}).then(function(t){200===t.status&&e.handleResetMCQ("new")})}},{key:"mcqButtons",value:function(){var e=this;return"creation"===this.state.action_level?s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"mcqFormValidation",value:"Valider",type:"button",className:" form-helper-button success"},{onClick:function(){return e.handleSaveNewMCQ()}}))):"update"===this.state.action_level?s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"mcqFormValidation",value:"Modifier",type:"button",className:" form-helper-button success"},{onClick:function(){return e.handleModifyMCQ()}})),s.a.createElement(Z,Object.assign({name:"mcqFormReset",value:"Reset And New",type:"reset",className:" form-helper-button danger"},{onClick:function(){return e.handleResetMCQ("new")}})),s.a.createElement(Z,Object.assign({name:"mcqFormReset",value:"Reset And Modify",type:"reset",className:" form-helper-button danger"},{onClick:function(){return e.handleResetMCQ("modify")}})),s.a.createElement(Z,Object.assign({name:"mcqFormdelete",value:"delete",type:"reset",className:" form-helper-button danger"},{onClick:function(){return e.handleDeleteMCQ()}}))):void 0}},{key:"oneMCQForm",value:function(){var e=this;return s.a.createElement("form",null,s.a.createElement("div",{className:"qcmFormTitle"}," Formulaire de Creation d'un QCM"),this.returnMCQField({content:this.state.question,placeholder:"Question ",label:"Question",handleChange:function(t){return e.handleChange(t,"question")}}),s.a.createElement("div",{className:"mcqAnswersDiv"},this.state.answers.map(function(t,a){var n=a+1,r=!1;return e.state.rightAnswers.indexOf(a)>-1&&(r=!0),s.a.createElement("div",{key:a,className:"oneAnswerDiv"},e.returnMCQField({content:t,label:"Answer "+n,placeholder:"Answer "+n,handleChange:function(t){return e.handleChange(t,"answer",a)}}),s.a.createElement(K,{name:"rightAnswer",checked:r,className:"none",onChange:function(t){return e.handleChange(t,"rightAnswer",a)}}))})),s.a.createElement("div",{className:"mcqExplanation"},this.returnMCQField({content:this.state.explanation,placeholder:"Explanation ",label:"Explanation",handleChange:function(t){return e.handleChange(t,"explanation")}})),s.a.createElement("div",{className:"hr-button-block"},this.mcqButtons()))}},{key:"returnInfos",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,"ref:",s.a.createElement("span",null,this.state.reference)),s.a.createElement("div",null,"level:",s.a.createElement("span",null,this.state.course_level)))}},{key:"render",value:function(){return s.a.createElement("div",null,this.oneMCQForm())}}]),t}(n.Component),bt=(n.Component,a(321),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={testTitle:a.props.testTitle||a.props.test.title||"",correctedMCQS:a.props.correctedMCQS||[],failedMCQS:a.props.failedMCQS||[],current:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.log("test result props ",this.props),this.props.failedMCQS.length>0&&this.setState({current:0})}},{key:"displayTestScore",value:function(){return s.a.createElement("div",null,"Score :",this.state.correctedMCQS.length-this.state.failedMCQS.length,"/",this.state.correctedMCQS.length)}},{key:"handleNext",value:function(){var e=this.state.failedMCQS.indexOf(this.state.current);e<this.state.failedMCQS.length-1&&this.setState({current:this.state.failedMCQS[e+1]})}},{key:"handlePrevious",value:function(){var e=this.state.failedMCQS.indexOf(this.state.current);e>0&&this.setState({current:this.state.failedMCQS[e-1]})}},{key:"displayPrevNext",value:function(e){var t=this;return"prev"===e?s.a.createElement("div",null,s.a.createElement(Z,Object.assign({name:"prevbutton",value:"<<",className:"form-helper-button warning"},{onClick:function(){return t.handlePrevious()}}))):s.a.createElement("div",null,s.a.createElement(Z,Object.assign({name:"prevbutton",value:">>",className:"form-helper-button warning"},{onClick:function(){return t.handleNext()}})))}},{key:"handleFailedMcqClick",value:function(e){this.setState({current:e})}},{key:"displayResult",value:function(){var e=this;return this.state.failedMCQS.length>0?this.state.correctedMCQS.map(function(t,a){return a===e.state.current?s.a.createElement("div",{key:a},s.a.createElement(pt,t)):""}):s.a.createElement("div",{className:"passed-test-div"},"You have succeed the Test !!")}},{key:"checkFailedMcqSelected",value:function(e){return this.state.current===e?"selected-failed-mcq-div":""}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"test-result-title"}," ",this.state.testTitle||"No Title"),s.a.createElement("div",{className:"test-score-div"}," ",this.displayTestScore()," "),s.a.createElement("div",{className:"test-result-div"},s.a.createElement("div",null,s.a.createElement("h4",{className:"title-failed-result"}," Failed Questions"),s.a.createElement("div",{className:"failed-mcq-number"},this.state.failedMCQS.map(function(t,a){return s.a.createElement("div",{key:a,onClick:function(){return e.handleFailedMcqClick(t)},className:""+e.checkFailedMcqSelected(t)},t+1)}))),s.a.createElement("div",{className:"failed-mcq-div"},s.a.createElement("div",{className:"previous"},this.displayPrevNext("prev")),s.a.createElement("div",null,this.displayResult()),s.a.createElement("div",{className:"next"}," ",this.displayPrevNext("next")," "))))}}]),t}(n.Component)),gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={test:a.props.test,mcqs:[],totalNumberOfMCQS:a.props.test.mcqs.length,currentMcqIndex:0,currentMCQ:"",correctedMCQS:[],failedMCQS:[],modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getCorrectedMCQ",value:function(){var e=Object(k.a)(C.a.mark(function e(t,a){var n,s;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.correctedMCQS,"correctedAndWrong"!==t.mode){e.next=7;break}if(-1!==(s=this.state.failedMCQS).indexOf(a)){e.next=7;break}return s.push(a),e.next=7,this.setState({failedMCQS:s});case 7:return n[a]=t,console.log("corrected MCQ ",this.state.correctedMCQS),e.next=11,this.setState({correctedMCQS:n});case 11:return e.next=13,this.handleNextMCQ();case 13:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this.props.test.mcqs;e.length>0?this.setState({mcqs:e,totalNumberOfMCQS:e.length,currentMcqIndex:0,currentMCQ:e[0]}):this.setState({mcqs:[],totalNumberOfMCQS:0,currentMcqIndex:"",currentMCQ:""})}},{key:"displayCurrentTestMCQ",value:function(e){var t=this;return console.log("current MCQ ",this.state.currentMCQ),this.state.currentMCQ?s.a.createElement(pt,{mcq:this.state.currentMCQ,getCorrectedMCQ:function(a){return t.getCorrectedMCQ(a,e)}}):""}},{key:"displayPrevNextButtons",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.currentMcqIndex===this.state.totalNumberOfMCQS?s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"testvalidationButton",value:"Valider Le Test",className:"form-helper-button success"},{onClick:function(){e.validateTest()}})),s.a.createElement(Z,Object.assign({name:"testvalidationButton",value:"Reprendre Le Test",className:"form-helper-button warning"},{onClick:function(){e.repeatTest()}}))):"")}},{key:"validateTest",value:function(){this.saveTestResult(),this.props.handleOpenModal(s.a.createElement(bt,{testTitle:this.state.test.title,correctedMCQS:this.state.correctedMCQS,failedMCQS:this.state.failedMCQS}))}},{key:"saveTestResult",value:function(){var e={userEmail:L().email,testResult:{test:this.state.test,correctedMCQS:this.state.correctedMCQS,failedMCQS:this.state.failedMCQS}};W.postToServer("/mcquestions/saveTestResult",e).then(function(e){e.status,console.log("test saved with success ")})}},{key:"repeatTest",value:function(){this.setState({currentMcqIndex:0,currentMCQ:this.state.mcqs[0]})}},{key:"handleCloseModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"handleOpenModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"runningTest-div"},s.a.createElement("div",null,s.a.createElement(g,{onClose:function(){return e.handleCloseModal()},visible:this.state.modalVisibility},this.state.modalChildren)),s.a.createElement("div",null," ",this.state.test.title||"DeFault Title"," "),s.a.createElement("div",null,this.displayCurrentTestMCQ(this.state.currentMcqIndex)),s.a.createElement("div",{className:"hr-button-block"},this.displayPrevNextButtons()))}}]),t}(n.Component),yt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={reference:a.props.reference,course_level:a.props.course_level,tests:[],modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={reference:this.props.reference,course_level:this.props.course_level};console.log("tests list params",t),W.postToServer("/mcquestions/getTestsOfLevel",t).then(function(t){200===t.status?(console.log("list of Tests Founded ",t.data),e.setState({tests:t.data})):alert(t.data.errorMessage)})}},{key:"handleCloseModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"handleOpenModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"runTest",value:function(e){var t=this,a=s.a.createElement(gt,{test:e,handleOpenModal:function(e){return t.handleOpenModal(e)}});this.handleOpenModal(a)}},{key:"deleteTest",value:function(e){W.postToServer("/crudOperations/delete",{collection:"tests",data:e}).then(function(e){})}},{key:"viewTest",value:function(e){this.handleOpenModal(s.a.createElement(Et,{test:e}))}},{key:"displayTest",value:function(e,t){var a=this;return s.a.createElement("div",{key:t,className:"test-list-title"},e.title||"No Title ",s.a.createElement("div",{className:"runtest-button-div"},s.a.createElement(Z,Object.assign({name:"runTestButton",value:"Run A Test",className:"form-helper-button white-on-blue"},{onClick:function(){a.runTest(e)}})),s.a.createElement(Z,Object.assign({name:"viewTestButton",value:"View",className:"form-helper-button success"},{onClick:function(){a.viewTest(e)}})),s.a.createElement(Z,Object.assign({name:"deletetestbutton",value:"Delete Test",className:"form-helper-button danger"},{onClick:function(){a.deleteTest(e)}}))))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleCloseModal()}},this.state.modalChildren),s.a.createElement("div",{className:"show-test-div"},this.state.tests.map(function(t,a){return e.displayTest(t,a)})))}}]),t}(n.Component),Et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={test_id:a.props.test_id||"",title:a.props.title||"",reference:a.props.reference||"",course_level:a.props.course_level||"",originalmcqs:a.props.mcqs||[],mcqs:a.props.mcqs||[],selectedmcqs:a.props.selectedmcqs||[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.test){e.next=6;break}return console.log("test selected ",this.props.test),t=this.props.test.mcqs[0],a={course_level:t.course_level,reference:t.reference},e.next=6,W.postToServer("/mcquestions/getMCQsOfLevel",a).then(function(e){if(200===e.status){console.log("list of MCQs Founded ",e.data);var t=[];n.props.test.mcqs.forEach(function(e,a){t.push(e._id)});var a=e.data.filter(function(e,a){return!t.includes(e._id)});n.setState({test_id:n.props.test._id,title:n.props.test.title||"",reference:n.props.test.reference,course_level:n.props.test.course_level,originalmcqs:e.data,mcqs:a,selectedmcqs:n.props.test.mcqs})}else alert(e.data.errorMessage)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"displayOneMCQ",value:function(e){return s.a.createElement(Ae.a,{value:e.question||"",modules:{toolbar:!1},readOnly:!0})}},{key:"handleAddMCQS",value:function(e){console.log("adding mcq ",e);var t=this.state.selectedmcqs,a=this.state.mcqs;t.push(e),a.splice(a.indexOf(e),1),this.setState({mcqs:a,selecetedmcqs:t})}},{key:"handleRemoveMCQS",value:function(e){console.log("remove mcq ",e);var t=this.state.selectedmcqs,a=this.state.mcqs;a.push(e),t.splice(t.indexOf(e),1),this.setState({mcqs:a,selecetedmcqs:t})}},{key:"createNewTest",value:function(){var e=this,t=this.state.selectedmcqs;if(t.length>0){var a=[],n=!0,s=!1,r=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var o=i.value;a.push(o._id)}}catch(u){s=!0,r=u}finally{try{n||null==l.return||l.return()}finally{if(s)throw r}}var c={title:this.state.title,reference:this.state.reference,course_level:this.state.course_level,mcqs:a};W.postToServer("/mcquestions/newTest",c).then(function(t){console.log("here too"),200===t.status?(console.log("test result",t.data),e.setState({test_id:t.data}),B(" New Test Saved with Success !!")):B(t.data.errorMessage)})}else alert("Vous devez Selectionner au moins une question")}},{key:"modifyTest",value:function(){var e=this.state.selectedmcqs;if(e.length>0){var t=[],a=!0,n=!1,s=void 0;try{for(var r,i=e[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var l=r.value;t.push(l._id)}}catch(c){n=!0,s=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw s}}var o={document:{_id:this.state.test_id},updates:{title:this.state.title,reference:this.state.reference,course_level:this.state.course_level,selectedmcqs_ids:t}};W.postToServer("/mcquestions/modifyTest",o).then(function(e){200===e.status?B(" Test modified with Success !!"):B(e.data.errorMessage)})}else alert("Vous devez Selectionner au moins une question")}},{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"setNewTest",value:function(){var e=this.state.originalmcqs;this.setState({test_id:"",mcqs:e})}},{key:"deleteTest",value:function(){W.postToServer("/crudOperations/delete",{collection:"tests",data:{_id:this.state.test_id}}).then(function(e){})}},{key:"displayTestButton",value:function(){var e=this;return 0===this.state.test_id.length?s.a.createElement(Z,Object.assign({name:"validateTestCreation",value:"Valider",className:"form-helper-button success"},{onClick:function(){return e.createNewTest()}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"modifyTestButton",value:"Modify",className:"form-helper-button warning"},{onClick:function(){return e.modifyTest()}})),s.a.createElement(Z,Object.assign({name:"newTestButton",value:"NewTest",className:"form-helper-button success"},{onClick:function(){return e.setNewTest()}})),s.a.createElement(Z,Object.assign({name:"deleteTestButton",value:"Delete",className:"form-helper-button danger"},{onClick:function(){return e.deleteTest()}})))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"test-creation-header"},this.displayTestButton(),s.a.createElement("h2",null,"Cr\xe9ation d'Un Test"),s.a.createElement(H,Object.assign({name:"testName",placeholder:"Titre Du Test",className:"form-helper-input test-title-input"},{onChange:function(t){e.handleTitleChange(t)}}))),s.a.createElement("div",{className:"one-test-div"},s.a.createElement("div",{className:"mcqs-list"},s.a.createElement("h3",null," Liste Des QCMs "),this.state.mcqs.map(function(t,a){return s.a.createElement("div",{className:"one-mcq-test-div",key:a,onClick:function(){return e.handleAddMCQS(t)}},e.displayOneMCQ(t))})),s.a.createElement("div",{className:"selected-mcqs-list"},s.a.createElement("h3",null," Liste Des QCMs Selectionn\xe9s "),this.state.selectedmcqs.map(function(t,a){return s.a.createElement("div",{className:"one-mcq-test-div",key:a,onClick:function(){return e.handleRemoveMCQS(t)}},e.displayOneMCQ(t))}))))}}]),t}(n.Component),Ct=(n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={tests:a.props.tests||[],currentIndex:-1,currentTest:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.props.tests.length>0){var e=this.state.tests[0].testResult,t=s.a.createElement(bt,e);this.setState({currentIndex:0,currentTest:t})}}},{key:"setCurrentTestNav",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.tests[t].testResult,n=s.a.createElement(bt,a),e.next=4,this.setState({currentIndex:-1,currentTest:""});case 4:return e.next=6,this.setState({currentIndex:t,currentTest:n});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"passedTestsNav",value:function(){var e=this;if(this.state.tests.length>0)return s.a.createElement("div",{className:"passed-tests-nav"},this.state.tests.map(function(t,a){return e.state.currentIndex===a?s.a.createElement("div",{key:a,className:"form-helper-button white-on-blue current-passed-test-nav",onClick:function(){return e.setCurrentTestNav(a)}},a+1):s.a.createElement("div",{key:a,className:"form-helper-button white-on-blue",onClick:function(){return e.setCurrentTestNav(a)}},a+1)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"passed-tests-div"},s.a.createElement("h5",null,"List of passed tests"),this.passedTestsNav(),this.state.currentTest)}}]),t}(n.Component)),kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={reference:"none",level:"none",selectedElement:{},activityContent:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleClose",value:function(){this.setState({modalVisibility:!1,modalChildren:""})}},{key:"setSelectedElement",value:function(e,t){console.log("selected",e," level ",t),this.setState({reference:e._id,level:t,selectedElement:e,activityContent:""})}},{key:"returnInfos",value:function(){return s.a.createElement("div",{className:"selected-course-infos"},s.a.createElement("span",null,this.state.selectedElement.title||""))}},{key:"newMCQ",value:function(){this.setState({activityContent:s.a.createElement(ft,{reference:this.state.reference,course_level:this.state.level})})}},{key:"listMCQS",value:function(){var e=this,t={reference:this.state.reference,course_level:this.state.level};W.postToServer("/mcquestions/getMCQsOfLevel",t).then(function(t){200===t.status?(console.log("list of MCQs Founded ",t.data),e.setState({activityContent:s.a.createElement(vt,{reference:e.state.reference,course_level:e.state.course_level,mcqs:t.data})})):alert(t.data.errorMessage)})}},{key:"newTEST",value:function(){var e=this,t={reference:this.state.reference,course_level:this.state.level};W.postToServer("/mcquestions/getMCQsOfLevel",t).then(function(t){200===t.status?(console.log("list of MCQs Founded ",t.data),e.setState({activityContent:s.a.createElement(Et,{reference:e.state.reference,course_level:e.state.level,mcqs:t.data})})):alert(t.data.errorMessage)})}},{key:"listTESTS",value:function(){console.log("selected element ",this.state.selectedElement),this.setState({activityContent:s.a.createElement(yt,{reference:this.state.reference,course_level:this.state.level})})}},{key:"showActivityContent",value:function(){return this.state.activityContent}},{key:"showPassedTests",value:function(){var e=this;W.postToServer("/mcquestions/getPassedTests",{user:L()}).then(function(t){200===t.status?(console.log("passed tests",t.data),t.data.length>0?e.setState({modalChildren:s.a.createElement(Ct,{tests:t.data}),modalVisibility:!0}):B("No registered test !! ")):console.log("listing passed tests error ",t.data)})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"mcqs-manager-container"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.handleClose()}},this.state.modalChildren),s.a.createElement("div",{className:"right-nav-options hr-button-block "},s.a.createElement(Z,Object.assign({name:"passedtests",value:"Realized tests",className:"form-helper-button white-on-blue"},{onClick:function(){e.showPassedTests()}}))),s.a.createElement("div",{className:"mcqs-manager-body"},s.a.createElement("div",{className:"location-div"},s.a.createElement(ct,{setSelectedElement:function(t,a){return e.setSelectedElement(t,a)}})),s.a.createElement("div",null,s.a.createElement("div",{className:"div-options"},s.a.createElement("div",{className:"options-div"},s.a.createElement("h3",null," MCQS Options"),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"newmcq",value:"New MCQ",className:"form-helper-button success"},{onClick:function(){return e.newMCQ()}})),s.a.createElement(Z,Object.assign({name:"listmcqs",value:"List MCQs",className:"form-helper-button success"},{onClick:function(){return e.listMCQS()}})))),s.a.createElement("div",{className:"options-div"},s.a.createElement("h3",null,"TESTS Options"),s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"newtest",value:"New TEST",className:"form-helper-button success"},{onClick:function(){return e.newTEST()}})),s.a.createElement(Z,Object.assign({name:"listtests",value:"List TESTS",className:"form-helper-button success"},{onClick:function(){return e.listTESTS()}}))))),this.returnInfos(),s.a.createElement("div",{className:"activity-div"},this.showActivityContent()))))}}]),t}(n.Component),Ot=(a(322),a(323),a(324),a(325),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={levels:a.props.levels||[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"removeLevel",value:function(e,t){e.preventDefault(),this.props.removeLevel(t)}},{key:"addLevel",value:function(e,t){e.preventDefault(),this.props.addLevel(t)}},{key:"displayLevels",value:function(){var e=this;return s.a.createElement("div",{className:"levels-list"},N.map(function(t,a){return e.props.levels.indexOf(t)>-1?s.a.createElement("div",{key:a,className:"unabled-level",onClick:function(a){e.removeLevel(a,t)}},t):s.a.createElement("div",{key:a,className:"disabled-level",onClick:function(a){e.addLevel(a,t)}},t)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"levels"},s.a.createElement("div",null),this.displayLevels())}}]),t}(n.Component)),St=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={_id:a.props.speciality._id,label:a.props.speciality.label||"",description:a.props.speciality.description||"",department:a.props.speciality.department||"",levels:a.props.speciality.levels||[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"saveSpecialityModification",value:function(e){var t=this,a={collection:"specialities",data:this.state,update:e};W.postToServer("crudOperations/update",a).then(function(a){200===a.status?(t.setState(Object(_e.a)({},e)),t.props.updateSpecialities&&t.props.updateSpecialities(e,"update"),t.props.closeModal()):console.log("response ",a)})}},{key:"modifySpeciality",value:function(){var e=this,t=[{name:"label",type:"text",placeholder:"Label",label:"Label",required:!0,value:this.state.label||""},{name:"description",type:"textarea",placeholder:"Description",label:"Description",value:this.state.description||""}],a=Object.assign({},w,{fields:t});a.fields=t;var n=s.a.createElement(X,{data:a,modificationForm:!0,handleValidation:function(t){return e.saveSpecialityModification(t)}});this.props.openModal(n)}},{key:"deleteSpeciality",value:function(){var e=this;console.log("about to delete",this.state);var t=this.state;W.postToServer("crudOperations/delete",{collection:"specialities",data:t}).then(function(a){200===a.status?e.props.updateSpecialities&&e.props.updateSpecialities(t,"delete"):console.log("response ",a)})}},{key:"displayOptions",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"modifydepartment",value:"Modify Speciality",className:"form-helper-button warning"},{onClick:function(){return e.modifySpeciality()}})),s.a.createElement(Z,Object.assign({name:"deletedepartment",value:"Delete Speciality",className:"form-helper-button danger"},{onClick:function(){return e.deleteSpeciality()}})))}},{key:"removeLevel",value:function(e){var t=this,a=this.state.levels,n=[];a.indexOf(e)>-1&&(n=a.filter(function(t,n){return n!==a.indexOf(e)&&null!==t}),console.log("level after deletion : ",n),W.postToServer("crudOperations/update",{collection:"specialities",data:{_id:this.state._id},update:{levels:n}}).then(function(e){200===e.status?t.setState({levels:n}):console.log(" update levels error : ",e.data)}))}},{key:"addLevel",value:function(e){var t=this,a=this.state.levels;-1===a.indexOf(e)&&(a.push(e),W.postToServer("crudOperations/update",{collection:"specialities",data:{_id:this.state._id},update:{levels:a}}).then(function(e){200===e.status?t.setState({levels:a}):console.log(" update levels error : ",e.data)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"department-main"},s.a.createElement("h3",null,this.state.label),s.a.createElement("p",null," ",this.state.description),s.a.createElement("div",{className:"hr-button-block"},this.displayOptions()),s.a.createElement("div",null,s.a.createElement(Ot,{levels:this.state.levels,addLevel:function(t){return e.addLevel(t)},removeLevel:function(t){return e.removeLevel(t)}})))}}]),t}(n.Component),jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalChildren:"",modalVisibility:!1,specialities:a.props.specialities||[],department:a.props.department},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"updateSpecialities",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=this.state.specialities;"update"===t?(Object.assign(n[a],e),this.setState({specialities:n})):"delete"===t&&(delete n[a],this.setState({specialities:n}))}},{key:"openModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"closeModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"specialities-main"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),s.a.createElement("div",{className:"specialities-div"},this.state.specialities.map(function(t,a){return s.a.createElement(St,{key:a,closeModal:function(){return e.closeModal()},openModal:function(t){return e.openModal(t)},speciality:t,updateSpecialities:function(t,n){return e.updateSpecialities(t,n,a)}})})))}}]),t}(n.Component),wt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={detailsVisibility:!1,_id:a.props.department._id,label:a.props.department.label||"",description:a.props.department.description||"",specialities:a.props.department.specialities||[]},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"saveDepartmentModification",value:function(e){var t=this,a=this.state;delete a.modalChildren,delete a.modalVisibility;var n={collection:"departments",data:a,update:e};W.postToServer("crudOperations/update",n).then(function(a){200===a.status?(t.setState(Object(_e.a)({},e)),t.props.updateDepartments&&t.props.updateDepartments(e,"update"),t.props.closeModal()):console.log("response ",a)})}},{key:"modifyDepartment",value:function(){var e=this,t=[{name:"label",type:"text",placeholder:"Label",label:"Label",required:!0,value:this.state.label||""},{name:"description",type:"textarea",placeholder:"Description",label:"Description",value:this.state.description||""}],a=Object.assign({},j,{fields:t});a.fields=t;var n=s.a.createElement(te,{data:a,modificationForm:!0,handleValidation:function(t){return e.saveDepartmentModification(t)}});this.props.openModal(n)}},{key:"deleteDepartment",value:function(){var e=this;console.log("about to delete",this.state);var t=this.state;delete t.modalChildren,delete t.modalVisibility,W.postToServer("crudOperations/delete",{collection:"departments",data:t}).then(function(a){200===a.status?e.props.updateDepartments&&e.props.updateDepartments(t,"delete"):console.log("response ",a)})}},{key:"saveNewSpeciality",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new speciality params",t),Object.assign(t,{department:this.state._id}),e.next=4,W.insertElementInDataBase("specialities",t);case 4:console.log("speciality inserted ",t),(a=this.state.specialities).push(t),this.setState({specialities:a}),this.props.closeModal();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"newSpeciality",value:function(){var e=this;console.log("specialities model ",w);var t=s.a.createElement(te,{data:w,handleValidation:function(t){return e.saveNewSpeciality(t)}});this.props.openModal(t)}},{key:"displayOptions",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,Object.assign({name:"modifydepartment",value:"Modify Department",className:"form-helper-button warning"},{onClick:function(){return e.modifyDepartment()}})),s.a.createElement(Z,Object.assign({name:"newdepartment",value:"+ Speciality",className:"form-helper-button success"},{onClick:function(){return e.newSpeciality()}})),s.a.createElement(Z,Object.assign({name:"deletedepartment",value:"Delete Department",className:"form-helper-button danger"},{onClick:function(){return e.deleteDepartment()}})))}},{key:"displayDetails",value:function(){return this.state.detailsVisibility?s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"  D\xe9partement de (Department Of ) : ",this.state.label),s.a.createElement("p",null," ",this.state.description),s.a.createElement("div",{className:"department-specialities"},s.a.createElement("div",{className:"hr-button-block"},this.displayOptions()),s.a.createElement("div",null,s.a.createElement("h4",null,"Sp\xe9cialities"),s.a.createElement(jt,{department:this.state._id,specialities:this.state.specialities})))):""}},{key:"handleShowDetails",value:function(){var e=this;W.postToServer("/crudOperations/get",{collection:"specialities",options:{queries:{department:this.state._id}}}).then(function(t){200===t.status?(console.log("specialities ",t.data),e.setState({specialities:t.data,detailsVisibility:!e.state.detailsVisibility})):console.log(t.data.errorMessage||"")})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"department-main"},s.a.createElement("div",{className:"department-item",id:this.state._id,onClick:function(){return e.handleShowDetails()}},this.state.label),s.a.createElement("div",null,this.displayDetails()))}}]),t}(n.Component),Nt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={modalChildren:"",modalVisibility:!1,departments:[],department:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.postToServer("crudOperations/get",{collection:"departments"}).then(function(t){200===t.status?(console.log("departments ",t.data),e.setState({departments:t.data})):console.log(t.data.errorMessage||"")})}},{key:"updateDepartments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;console.log("will  "+t,this.state);var n=this.state.departments;"update"===t?(Object.assign(n[a],e),this.setState({departments:n})):"delete"===t&&(console.log("deletion of department"),delete n[a],this.setState({departments:n}))}},{key:"saveNewDepartment",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new department params",t),e.next=3,W.insertElementInDataBase("departments",t);case 3:console.log("department inserted ",t),(a=this.state.departments).push(t),this.setState({departments:a}),this.closeModal();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"openModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"closeModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"newDepartment",value:function(){var e=this,t=s.a.createElement(te,{data:j,handleValidation:function(t){return e.saveNewDepartment(t)}});this.openModal(t)}},{key:"handleDepNavClick",value:function(e){window.scrollTo(0,document.getElementById(e).offsetTop)}},{key:"displayNavPanel",value:function(){var e=this;return s.a.createElement("div",{className:"department-nav-panel"},s.a.createElement("h3",{className:"nav-dep-title"},"Departments"),this.state.departments.map(function(t,a){return s.a.createElement("div",{key:a,className:"department-nav-item",onClick:function(){return e.handleDepNavClick(t._id)}},t.label)}))}},{key:"listDepartments",value:function(){var e=this;return this.state.departments.map(function(t,a){return s.a.createElement(wt,{key:a,department:t,openModal:function(t){return e.openModal(t)},closeModal:function(){return e.closeModal()},updateDepartments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.updateDepartments(t,n,a)}})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"departments-main"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),this.displayNavPanel(),s.a.createElement("div",null,s.a.createElement("h3",null," List Of Departments"),s.a.createElement(Z,Object.assign({name:"newdepartment",value:"+ Department",className:"form-helper-button success"},{onClick:function(){return e.newDepartment()}}))),s.a.createElement("div",{className:"departments-list-div"},this.listDepartments()))}}]),t}(n.Component),Mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"courses-administration-main-div"},s.a.createElement("div",null," ",s.a.createElement("h3",null,"Courses Administration")),s.a.createElement(Nt,null))}}]),t}(n.Component);a(326);var Tt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={messages:[],selectedMessage:{},modalChildren:"",modalVisibility:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;W.postToServer("crudOperations/get",{collection:"messages"}).then(function(t){200===t.status?(console.log("messages",t.data),e.setState({messages:t.data})):console.log(t.data.errorMessage)})}},{key:"openModal",value:function(e){this.setState({modalChildren:e,modalVisibility:!0})}},{key:"closeModal",value:function(){this.setState({modalChildren:"",modalVisibility:!1})}},{key:"deleteMessage",value:function(){var e=Object(k.a)(C.a.mark(function e(t,a){var n=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.postToServer("crudOperations/delete",{collection:"messages",data:{_id:t._id}}).then(function(e){200===e.status&&n.setState({messages:n.state.messages.filter(function(e,t){return t!==a})})});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleReplyValidation",value:function(e,t,a){var n=this;console.log("reply validated data",t),t.text.length>3&&W.postToServer("/contacts/reply",{message:e,reply:t.text}).then(function(s){if(200===s.status){console.log("operation done with success");var r=e.replies||[];r.push(t.text),e.replies=r;var i=n.state.messages;i[a]=e,n.setState({messages:i})}else console.log("operation failed",s)})}},{key:"handleReply",value:function(e,t){var a=this,n=s.a.createElement(et,{onValidate:function(n){return a.handleReplyValidation(e,n,t)}});this.openModal(n)}},{key:"displayReplies",value:function(e){var t=e.replies.map(function(e,t){return s.a.createElement("div",{className:"message-reply-div",key:t},e)});this.openModal(s.a.createElement("div",{className:"message-replies"}," ",t," "))}},{key:"returnOptions",value:function(e,t){var a=this;return s.a.createElement("div",{className:"hr-button-block"},s.a.createElement(Z,Object.assign({name:"",value:"Reply",className:"form-helper-button success"},{onClick:function(){return a.handleReply(e,t)}})),e.hasOwnProperty("replies")?s.a.createElement(Z,Object.assign({name:"",value:"Replies View",className:"form-helper-button white-on-blue"},{onClick:function(){return a.displayReplies(e)}})):"",s.a.createElement(Z,Object.assign({name:"",value:"delete",className:"form-helper-button danger"},{onClick:function(){return a.deleteMessage(e,t)}})))}},{key:"showMessages",value:function(){var e=this;return this.state.messages.length>0?s.a.createElement("div",{className:"messages-list-div"},s.a.createElement("div",{className:"messages-list-title"},"Messages"),this.state.messages.map(function(t,a){return s.a.createElement("div",{key:a,className:"contact-message-item"},(n=t.message,s.a.createElement(Ae.a,{value:n||"",modules:{toolbar:!1},readOnly:!0})),s.a.createElement("div",{className:"options"},e.returnOptions(t,a)));var n})):""}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"contacts-administration-main-div"},s.a.createElement(g,{visible:this.state.modalVisibility,onClose:function(){return e.closeModal()}},this.state.modalChildren),s.a.createElement("h3",null,"Consultations and Replies to Users Messages"),this.showMessages())}}]),t}(n.Component),xt=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),D.subscribe(function(e){a.handleUserLogin(e)}),_.subscribe(function(e){a.handleMessageToShow(e)}),P.subscribe(function(e){return a.handleRedirection(e)}),a.state={menuOpen:!1,loggedIn:!1,messageModalVisibility:!1,messageToShow:""},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleUserLogin",value:function(e){this.setState({loggedIn:e})}},{key:"handleRedirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&Ee.push(e)}},{key:"handleMessageToShow",value:function(e){var t=this;this.setState({messageModalVisibility:!0,messageToShow:e}),setTimeout(function(){return t.closeModal()},2e3)}},{key:"openMenu",value:function(){this.setState({menuOpen:!0})}},{key:"closeMenu",value:function(){this.setState({menuOpen:!1})}},{key:"closeModal",value:function(){this.setState({messageModalVisibility:!1,messageToShow:""})}},{key:"componentDidMount",value:function(){L()?this.setState({loggedIn:!0}):(console.log("current history ",Ee," and props ",this.props),this.handleRedirection("/welcome"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App",onClick:function(){return e.closeMenu()}},s.a.createElement(g,{visible:this.state.messageModalVisibility,onClose:function(){return e.closeModal()},position:25},s.a.createElement("div",{style:{color:"black"}},this.state.messageToShow)),s.a.createElement("nav",null,s.a.createElement("span",{className:"sm-only  ",onClick:function(t){e.setState({menuOpen:!e.state.menuOpen}),t.stopPropagation()}}),s.a.createElement(ke,{loggedIn:this.state.loggedIn})),s.a.createElement("aside",{className:this.state.menuOpen?"menu-open":"menu-closed"}),s.a.createElement("main",{className:" container "+(this.state.menuOpen?"menu-open":"menu-closed")},s.a.createElement(Oe.a,{exact:!0,path:"/",component:Se}),s.a.createElement(Oe.a,{path:"/welcome",component:Se}),s.a.createElement(Oe.a,{exact:!0,path:"/courses",render:function(t){return s.a.createElement(Te,Object.assign({},t,{loggedIn:e.state.loggedIn}))}}),s.a.createElement(Oe.a,{path:"/course/:id",component:Ge}),s.a.createElement(Oe.a,{exact:!0,path:"/courses/administration",component:Mt}),s.a.createElement(Oe.a,{path:"/users",component:de}),s.a.createElement(Oe.a,{path:"/profile",component:rt}),s.a.createElement(Oe.a,{exact:!0,path:"/contacts",component:at}),s.a.createElement(Oe.a,{exact:!0,path:"/contacts/administration",component:Tt}),s.a.createElement(Oe.a,{path:"/connexion",component:ge}),s.a.createElement(Oe.a,{path:"/daniel",render:function(e){return s.a.createElement(re,Object.assign({},e,S,{collection:"users"}))}}),s.a.createElement(Oe.a,{path:"/createcourse",component:Je}),s.a.createElement(Oe.a,{path:"/mcqs",component:kt})),s.a.createElement("footer",null),s.a.createElement(y,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=a(333);i.a.render(s.a.createElement(Vt.a,{history:Ee},s.a.createElement(xt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.4985ca38.chunk.js.map